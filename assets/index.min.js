const t=""+new URL("out_0-rh3THiV_.png",import.meta.url).href,A=[{n:"Level_0",w:112,t:27,A:"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"},{n:"Level_1",w:73,t:37,A:"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"},{n:"Level_2",w:36,t:38,A:"AQQOACA4GFwZXBpcG1wAdAB4AHwAgACEAIgAjACQAJQAEAMAHxgbMBtgARADAAAYICAgPAEMBQAAFCAcIDQgTAGUAAwBABtYAAQTAB8cHyAfJB8oHywfMBs0HzQbOB84GzwfPBtAH0AfRB9IH0wXWBdcAQgkAAEYAhgDGAQYBRgGGAcYCBgJGAoYCxgMGA0YDhgaGBsYHBgdGB4YACwUMCBQIVAiUCNQF2AYYBlgGmAcZCJkI2QheCJ4I3gcgAIEIwAAAAAEAAgADAAQIBgAHAAgACQgJAAoICggLBwwIDAcNBw4ITgcPBxAIEAgRCBIHFQcWBxcHGABdAF4AXwBgAGEAYgBjAGQAQAxAAEUAhQDFAQUBRQGFAcUCBQJFAoUCxQMFA0UDhQaFBsUHBQdFB4UHxQULBssIUwiTCNMGFgZWBpYImAjYABwAXAhdCJ0I3QcfAKUA5QIlAmUCpQQlBGUEpQYlBmUGpQblByUAAgJABkYEzAaMBtEH1AbZCFkIHgbgAIIBgAPGCEgFTAhPBxEHYACAAsADxQgFCEcFSwcLCE0HXwElAuUE5QdlAAACgAZFBMsGiwbVCFgIHQbfAeUD5QXlAQIDAAPMA04C0AJSAdQB1QQVBdUBVwUZBRoFGwEDAEAFCAEBAMAFBgXUBxQBAAvAAEsAiwDLAQsBSwGLAcsCCwJLAosCywMLA0sDiwONAw8FjwXPApECEwGWA5cBGAMYBVgFmACcANwBHAFcAZwB3AIcAlwCnALcAxwDXAOcA9wEHARcBJwE3AhjCKMI4wFAAMAFRwYPB1kAwAEABMcA2ALYCCMAxAPAA80DTwVQAtEFEQTSAlMEkwRUAdYEFgPXAVgDWAUcAMMAQAPLAIMDgANNAs8FTwUQAlEE0QSSAdMEUwQUAVYD1gNXBRgAwgBABQcE0wBAAUQEkwDAB0QDmwiiBFMIQANCCIIAyAGIAogAyQGJAokIiwLNB40DzwNRB5EIkQLTBlQCVQhXAdgHmwedAeIC4gPiBOIGIgFjAmMDYwRjBWMGowIBBcABgAHAAgAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgASBBMEFAQVBBYEFAgWaAcQAwAFABEAEwgIEAYACQAfABcEFQgXaBZsCAwBABpoBwwBABV0BwQFABEEFWgVbBVwAngICCUAAwAEAAoACwAMAA0ADgAPABAAIAAhACIAIwAGBAcECAQYBBkEGgQbBBwEHQQeBBIIFggUDBhoGWgIeAl4D3gQeBF4EngTeBR4FXgJBAIAFnAWdAgAEQAWZBdkGGQZZBtoA3QHdAh0CXQKdA50D3QQdBF0EnQTdBR0BwgHAAIABQQRCBMMGmwHeA54CQgJAAkEHwQXCBUMF2wbbAN4CngWeAkAAQAaZAcAAgAVZAJ0CwwBAAJ8CwAGAAR0BXQGdAt0DHQNdAwAAQAcaAYMEgAIEAkQDRAaEBwQBCgFKAcoGigWOApAEUgiSCNcA2wDkAmQC5AGBBcAChAbEB8QIRgGKAgoCygbKBQ8B0gEbAVsCWwMbBx4CJAKkA+QEJAYkBqQHJAdkAYQEAALEBQoHCghMAs4EEwFVARcAWwHbAhsCmwicBt4HXgCkAYIEgAMEA4QIBAMKBMoDDgJQBNACEghSCNIGlQNWCJcBmwRkBOQGZAGABUAAygJKAooDSgVOBc4GDgSRAZUGFQZVA5YA1wCbAtsIHAhcAeQEpAXkBuQ"}];function i(t){function A(t){function A(t){return[4*(t%1024),4*Math.floor(t/1024)]}let i=[],s=function(t){const A=atob(t),i=A.length,s=new Uint8Array(i);for(let n=0;n<i;n++)s[n]=A.charCodeAt(n);return new Uint16Array(s.buffer)}(t);for(let n=0;n<s.length;){let t=s[n];n++;let h=s[n];n++;let e=[...s.slice(n,n+h)];n+=h,i.push(...e.map((i=>({src:A(t),px:A(i)}))))}return i}return t.map((t=>{let{n:i,w:s,t:n,A:h}=t;return{name:i,w:s,t:n,A:A(h)}}))}const s=new class{image;info;i;h;async load(){var s;this.image=await(s=t,new Promise((t=>{let A=new Image;A.onload=()=>t(A),A.src=s}))),this.info="bullet\n\n0*0*idle\n\n0*80*236\n\n\ncollect\n\n0*2*coin\n\n0*88*236\n0*96*236\n0*104*236\n\n\nconfetti\n\n0*3*idle\n\n0*112*236\n0*120*236\n0*128*236\n0*136*236\n\n\ncrash\n\n0*2*idle\n\n0*144*236\n0*152*236\n0*160*236\n\n\ncrawler\n\n0*1*idle\n\n0*168*236\n0*176*236\n\n\nend\n\n0*4*idle\n\n2*0*0\n2*80*0\n2*160*0\n2*0*80\n2*80*80\n\n\nflies\n\n0*7*idle\n8*13*run\n\n1*160*190\n1*176*190\n1*192*190\n1*208*190\n1*224*190\n1*240*190\n1*240*160\n1*240*80\n1*240*96\n1*240*112\n1*240*128\n1*240*144\n1*240*0\n1*240*16\n\n\nfx_collect\n\n0*2*idle\n\n0*184*236\n0*192*236\n0*200*236\n\n\nfx_djump\n\n0*1*idle\n\n0*208*236\n0*216*236\n\n\nfx_dust\n\n0*4*idle\n5*7*jump\n\n0*224*236\n0*232*236\n0*240*236\n0*248*236\n0*80*244\n0*88*244\n0*96*244\n0*104*244\n\n\nfx_flash\n\n0*1*idle\n\n0*112*244\n0*120*244\n\n\nloading\n\n0*1*audio\n2*4*input\n\n4*0*160\n4*80*160\n4*160*160\n4*0*190\n4*80*190\n\n\nmain_char\n\n0*2*idle\n3*6*victory\n7*12*run\n13*17*jump\n18*20*die\n\n0*128*244\n0*136*244\n0*144*244\n0*152*244\n0*160*244\n0*168*244\n0*176*244\n0*184*244\n0*192*244\n0*200*244\n0*208*244\n0*216*244\n0*224*244\n0*232*244\n0*240*244\n0*248*244\n0*160*206\n0*168*206\n0*176*206\n0*184*206\n0*192*206\n\n\nnpc\n\n0*0*idle\n\n3*0*220\n\n\nrestart\n\n0*2*idle\n3*6*bg\n\n1*48*220\n1*64*220\n1*80*220\n1*96*220\n1*112*220\n1*128*220\n1*144*220\n\n\ntest\n\n0*2*idle\n3*4*attack\n\n1*160*220\n1*176*220\n1*192*220\n1*208*220\n1*224*220\n\n\ntiles\n\n0*0*idle\n\n2*160*80\n\n\nvictory\n\n0*8*idle\n\n1*240*220\n1*240*32\n1*240*48\n1*240*64\n1*0*236\n1*16*236\n1*32*236\n1*48*236\n1*64*236".split(/\r?\n\r?\n\r?\n/).map((t=>{let[A,i,s]=t.split(/\r?\n\r?\n/);return{name:A,tags:i.split(/\r?\n/).map((t=>{let[A,i,s]=t.split("*");return{from:parseInt(A),to:parseInt(i),name:s}})),B:s.split(/\r?\n/).map((t=>{let[A,i,s,n,h,e,a,B]=function(t){let[A,i,s]=t,n=0,h=0,[e,a]=0===A?[8,8]:1===A?[16,16]:2===A?[80,80]:4===A?[80,30]:[0,0],[B,g]=[e,a];return[n,h,e,a,i,s,B,g]}(t.split("*").map((t=>parseInt(t))));return{fx:A,fy:i,l:s,o:n,C:h,M:e,F:a,u:B}}))}})),this.h=this.info.find((t=>"tiles"===t.name)).B[0],this.i=i(A)}};class n{constructor(t,A){this.canvas=t,this.D=A}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){let{D:t}=this;t.clearRect(0,0,this.width,this.height)}fr(t,A,i,s,n){let{D:h}=this;h.fillStyle=n,h.fillRect(t,A,i,s)}G(t,A){let{D:i}=this;i.save(),i.translate(Math.floor(t),Math.floor(A))}pop(){let{D:t}=this;t.restore()}U(t,A,i,s=1,n=1){let{fx:h,fy:e,C:a,M:B,F:g,u:Q}=t.I,{_:r,Y:l}=t,o=A-h-r,w=i-e-l;this.R(o,w,a,B,g,Q,s,n)}m(t,A,i){let{fx:n,fy:h,C:e,M:a}=s.h,B=A-n,g=i-h,Q=t%20*4,r=4*Math.floor(t/20);this.R(B,g,e+Q,a+r,4,4)}R(t,A,i,n,h,e,a=1,B=1){let{D:g}=this,{image:Q}=s;g.save();let r=h,l=e,o=r*Math.abs(a),w=l*Math.abs(B);g.scale(Number(a.toFixed(2)),Number(B.toFixed(2))),a<0&&(t*=-1,t-=o),B<0&&(A*=-1,A-=w),g.drawImage(Q,i,n,r,l,Math.round(t),Math.round(A),Math.round(o),Math.round(w)),g.restore()}}const h={p:16,time:0,V(t,A=0){let{p:i,time:s}=this;return Math.floor((s-A-i)/t)<Math.floor((s-A)/t)}};class e{k;W(t){return this.k=t,this}visible=!0;parent;J;X;Z;N;H(t,A){this.N.push([t,A])}constructor(){this.Z=[],this.X=[],this.N=[]}P(t){return this.X.filter((A=>A instanceof t))}v(t){return this.X.find((A=>A instanceof t))}T(t,A){let i=(new t).W(A).init();return i.parent=this,i}L(t,A={}){let i=this.T(t,A);return this.X.push(i),i}j(t,A={},i=7){let s=this.T(t,A);return this.X.push(s),this.Z.push([s,i]),s}remove(t){if(!t)return void(this.parent?this.parent.remove(this):this.S());let A=this.X.indexOf(t);if(-1===A)throw"noscene rm";this.X.splice(A,1),A=this.Z.findIndex((([A])=>A===t)),-1!==A&&this.Z.splice(A,1),t.S()}init(){return this.J=0,this.K(),this}update(){0===this.J&&this.O(),this.X.forEach((t=>t.update())),this.J+=h.p,this.N=this.N.map((([t,A])=>(t-h.p<0&&A(),[t-h.p,A]))).filter((t=>t[0]>0)),this.Z.slice(0).forEach((([t,A])=>{let i=this.Z.filter((A=>A[0].constructor.name===t.constructor.name));if(i.length>A){let t=i[0][0];this.remove(t)}})),this.q(),this.$()}draw(t){this.visible&&(this.tt(t),this.X.forEach((A=>A.draw(t))),this.At(t))}S(){this.it()}K(){}O(){}q(){}$(){}At(t){}tt(t){}it(){}}class a extends e{get data(){return this.k}get info(){let t=s.info.find((t=>t.name===this.st));if(!t)throw`nosprite ${this.st}`;return t}get duration(){return this.data.duration??.4}set duration(t){this.data.duration=t}get tag(){let t=this.info.tags.find((t=>t.name===this.nt));if(!t)throw`notag ${this.st} ${this.nt}`;return t}get st(){return this.data.name}get nt(){return this.data.tag||"idle"}x=0;y=0;ht=1;et=1;Bt(t,A){this.x=t,this.y=A}_current_frame=0;get I(){let{from:t}=this.tag;return this.info.B[this._current_frame+t]}get gt(){return this.data.gt??"c"}get _(){if("tl"===this.gt)return 0;let{l:t}=this.I;return"c"===this.gt||"bc"===this.gt?t/2:0}get Y(){if("tl"===this.gt)return 0;let{o:t}=this.I;return"c"===this.gt?t/2:"bc"===this.gt?t:0}Qt(t){this.data.tag!==t&&(this.data.tag=t,this._current_frame=0,this.rt=0)}rt=0;q(){let{from:t,to:A}=this.tag,{duration:i}=this,s=i/(A-t+1),n=A-t;this.rt+=h.p,this.rt>=s&&(this.rt-=s,this._current_frame===n?!1!==this.data.loop&&(this._current_frame=0):this._current_frame+=1)}At(t){let{x:A,y:i,ht:s,et:n}=this;t.U(this,A,i,s,n)}}const B=function(){let t=new Set;return document.addEventListener("keydown",(A=>{return i=A.key,void t.add(i);var i})),document.addEventListener("keyup",(A=>{return i=A.key,void t.delete(i);var i})),A=>[...t].includes(A)}();var g=function(){var t,A,i,s,n,h=function(t){return Math.sin(6.283184*t)},e=function(t){return.003959503758*2**((t-128)/12)},a=function(t,A,i){var s,n,h,a,g,Q,r=B[t.lt[0]],l=t.lt[1],o=t.lt[3]/32,w=B[t.lt[4]],c=t.lt[5],d=t.lt[8]/32,C=t.lt[9],E=t.lt[10]*t.lt[10]*4,M=t.lt[11]*t.lt[11]*4,F=t.lt[12]*t.lt[12]*4,u=1/F,D=-t.lt[13]/16,G=t.lt[14],U=i*2**(2-t.lt[15]),f=new Int32Array(E+M+F),I=0,x=0;for(s=0,n=0;s<E+M+F;s++,n++)n>=0&&(n-=U,g=e(A+(15&(G=G>>8|(255&G)<<4))+t.lt[2]-128),Q=e(A+(15&G)+t.lt[6]-128)*(1+8e-4*t.lt[7])),h=1,s<E?h=s/E:s>=E+M&&(h=(1-(h=(s-E-M)*u))*3**(D*h)),a=r(I+=g*h**o)*l,a+=w(x+=Q*h**d)*c,C&&(a+=(2*Math.random()-1)*C),f[s]=80*a*h|0;return f},B=[h,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var A=t%1*4;return A<2?A-1:3-A}];this.init=function(h){t=h,A=h.ot,i=0,s=h.wt*h.ct*(A+1)*2,n=new Int32Array(s)},this.dt=function(){var e,g,Q,r,l,o,w,c,d,C,E,M,F,u,D=new Int32Array(s),G=t.Ct[i],U=t.wt,f=t.ct,I=0,x=0,_=!1,Y=[];for(Q=0;Q<=A;++Q)for(w=G.Et[Q],r=0;r<f;++r){var R=w?G.c[w-1].f[r]:0;R&&(G.lt[R-1]=G.c[w-1].f[r+f]||0,R<17&&(Y=[]));var m=B[G.lt[16]],p=G.lt[17]/512,V=2**(G.lt[18]-9)/U,k=G.lt[19],W=G.lt[20],J=43.23529*G.lt[21]*3.141592/44100,X=1-G.lt[22]/255,Z=1e-5*G.lt[23],N=G.lt[24]/32,H=G.lt[25]/512,b=6.283184*2**(G.lt[26]-9)/U,P=G.lt[27]/255,v=G.lt[28]*U&-2;for(E=(Q*f+r)*U,l=0;l<4;++l)if(o=w?G.c[w-1].n[r+l*f]:0){Y[o]||(Y[o]=a(G,o,U));var T=Y[o];for(g=0,e=2*E;g<T.length;g++,e+=2)D[e]+=T[g]}for(g=0;g<U;g++)(C=D[c=2*(E+g)])||_?(M=J,k&&(M*=m(V*c)*p+.5),x+=(M=1.5*Math.sin(M))*(F=X*(C-x)-(I+=M*x)),C=3==W?x:1==W?F:I,Z&&(C=(C*=Z)<1?C>-1?h(.25*C):-1:1,C/=Z),_=(C*=N)*C>1e-5,u=C*(1-(d=Math.sin(b*c)*H+.5)),C*=d):u=0,c>=v&&(u+=D[c-v+1]*P,C+=D[c-v]*P),D[c]=0|u,D[c+1]=0|C,n[c]+=0|u,n[c+1]+=0|C}return++i/t.Mt},this.Ft=function(t){for(var A=t.createBuffer(2,s/2,44100),i=0;i<2;i++)for(var h=A.getChannelData(i),e=i;e<s;e+=2)h[e>>1]=n[e]/65536;return A}};const Q={Ct:[{lt:[1,130,128,0,1,128,116,9,0,25,6,22,34,0,0,0,0,69,3,0,2,23,167,0,32,77,6,25,6],Et:[1,2,1,2,,,1,2,1,2,1,2,,2,1],c:[{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]},{n:[142,146,137,142,146,137,142,146,137,142,146,137,142,146,137,140,144,135,140,144,135,140,144,135,140,144,135,140,144,135,140,144,154,,,154,,,154,,,154,,,154,,,152,,,152,,,152,,,152,,,152,,,152],f:[]}]},{lt:[0,68,128,0,3,91,128,6,0,0,25,40,101,37,102,0,1,55,8,0,1,53,61,26,27,84,6,144,4],Et:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,139,,,,,,,,135,,,,,,,,139,,,,,,,,151,,,,,,,,144,,,,,,,,139,,,,,,,,144,,,,,,,,142,,,,,,,,141,,,,,,,,142,,,,,,,,141],f:[]},{n:[135,,,,,,,,,,,,135,,,,,,,,,,,,135,,,,,,,,,,,,137,,,,,,,,,,,,139,,,,,,,,,,,,147],f:[]}]},{lt:[2,60,127,28,2,83,138,0,27,0,61,28,65,11,0,0,2,0,0,0,2,118,56,0,91,146,4,0,2],Et:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,,,,,,,,,135],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,147],f:[]}]},{lt:[3,255,116,79,0,255,116,0,83,123,4,6,69,52,0,0,0,184,11,1,2,14,0,0,32,0,0,0,0],Et:[,,,,2,2,2,1,2,2,1,1,,,2,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135,,,,,,135,,,135,,,135,,,,,,135,,,135,,,135],f:[]},{n:[,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141],f:[]}]},{lt:[0,39,117,24,0,51,110,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,1,39,76,5,0,0],Et:[,,,,,,,,,,,,,,,2,2],c:[{n:[],f:[]},{n:[,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151],f:[]}]},{lt:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],Et:[,,,,2,,2,2,2,2,2,2,2,,2],c:[{n:[],f:[]},{n:[135,,,,,,147,,,,,,135,,,,,,147,,,,,,135,,,,,,147],f:[]}]},{lt:[0,51,128,64,0,59,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,2],Et:[,,,,,2,2,2,2,2,,,2,2],c:[{n:[],f:[]},{n:[,147,,,135,,,135,,,135,,,147,,,135,,,135,,,147,,,135,,,135,,,147],f:[]}]},{lt:[1,127,118,0,1,128,128,10,0,0,21,0,59,12,0,0,0,69,3,1,1,23,167,0,32,77,6,25,6],Et:[,,,,2,2,,,2,2,2,2,2],c:[{n:[],f:[]},{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]}]}],wt:6615,ct:32,ot:16,Mt:8},r=t=>({Ct:[{lt:[1,109,120,0,0,53,120,4,0,0,15,0,48,15,50,2,1,0,0,0,2,255,96,0,37,24,1,67,1],Et:[1],c:[{n:[t],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1}),l=[r(151),r(161),r(171)],o={Ct:[{lt:[3,182,119,63,1,67,129,10,4,0,11,2,138,215,0,0,1,164,12,0,2,94,148,57,32,0,9,0,0],Et:[1],c:[{n:[137],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1},w=t=>({Ct:[{lt:[0,100,125,0,0,201,131,2,0,0,5,0,39,0,134,3,0,195,6,0,2,44,60,1,39,0,10,0,0],Et:[1],c:[{n:[t],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1}),c=[w(135),w(147)],d=function(){let t=new AudioContext,A=t.createGain();A.connect(t.destination);const i={},s=[{name:"song",data:Q},{name:"pickup0",data:l[0]},{name:"pickup1",data:l[1]},{name:"pickup2",data:l[2]},{name:"damage",data:o},{name:"jump",data:c[0]},{name:"djump",data:c[1]}];return{dt:()=>(s.forEach((A=>{let s=new g;s.init(A.data),function n(){if(1===s.dt()){let n=s.Ft(t);((t,A)=>{i[t]=A})(A.name,n)}else setTimeout(n,0)}()})),new Promise((t=>{!function A(){Object.keys(i).length!==s.length?setTimeout(A,100):t()}()}))),play:(s,n=!1,h=.8)=>{const e=i[s];if(!e)return;let a=t.createBufferSource(),B=t.createGain();return a.buffer=e,a.connect(B),B.connect(A),a.loop=n,B.gain.value=h,a.start(),()=>{a.stop()}}}}();function C(t,A,i){return t<A?Math.min(t+i,A):t>A?Math.max(t-i,A):t}function E(t,A){return t.x<A.x+A.w&&t.x+t.w>A.x&&t.y<A.y+A.t&&t.y+t.t>A.y}function M(t){let A;const i=(s,n)=>{A&&A.remove(),A=(new s).W(n),A.g=t,A.go=i,A.init()};i(u),function(t){let A;const i=s=>{h.p=Math.min(20,Math.max(16,A?s-A:16))/1e3,A=s,h.time+=h.p,t(),requestAnimationFrame(i)};requestAnimationFrame(i)}((()=>{A.update(),t.clear(),t.fr(0,0,64,64,"hsl(20, 5%, 50%)"),t.fr(1,1,62,62,"hsl(70, 15%, 30%)"),A.draw(t)}))}class F extends e{ut=!1;Dt;g;go;update(){B("m")?this.ut||(this.ut=!0,this.Dt?(this.Dt(),this.Dt=void 0):this.Dt=d.play("song",!0)):this.ut=!1,super.update()}S(){super.S(),this.Dt?.()}}class u extends F{K(){s.load().then((()=>{let t=this.L(a,{name:"loading",tag:"audio",duration:1});t.x=32,t.y=32,d.dt().then((()=>{this.go(G,{level:1})}))}))}}class D extends F{K(){let t=this.L(a,{name:"end"});t.x=32,t.y=32}q(){this.J>4&&B("x")&&this.go(G,{level:1})}}class G extends F{get data(){return this.k}Gt;Ut;K(){this.Dt=d.play("song",!0,.1),this.Gt=this.L(H,{level:this.data.level}),this.Ut=this.L(U)}q(){this.Gt.v(W)&&B("x")&&this.go(G,{level:this.data.level}),(this.Ut.v(f)?.J??0)>4&&(3===this.data.level?this.go(D):this.go(G,{level:this.data.level+1}))}}class U extends e{width=0;ft=0;It;xt;_t(){this.ft>0&&this.width++,this.ft=.9,d.play("pickup"+Math.floor(3*Math.random()))}get done(){return this.width===this.Yt}K(){let t=this.L(a,{name:"collect",tag:"coin"});t.x=3,t.y=3}q(){if(this.ft>0&&(this.ft=C(this.ft,0,3*h.p),this.ft<.5&&(this.width++,this.ft=0)),this.It&&this.It>0&&(this.It=C(this.It,0,3*h.p),0===this.It)){this.It=void 0;let t=this.L(a,{name:"restart",tag:"bg",duration:.8});t.x=32,t.y=32,this.xt=this.L(a,{name:"restart",duration:5}),this.xt.x=32,this.xt.y=32}this.xt&&(this.xt.y=32+4*Math.sin(8*this.J))}Yt=0;At(t){t.fr(6,1,this.Yt,1,"#f7ffff"),t.fr(6,2,this.width,2,"#b4d800");let A=this.ft/.9*1;t.fr(6+this.width,2,A,2,"#f59562")}}class f extends e{K(){let t=this.L(a,{name:"victory",duration:1});t.x=32,t.y=20}}class I extends e{get Rt(){return{x:this.x,y:this.y,w:this.w/2,t:this.t/2}}U;Vt=!0;kt=1;Wt=.8;w=4;t=4;grid;dx=0;dy=0;x=0;y=0;Jt=0;Xt=0;Zt=this.Nt;Ht;bt;get Pt(){return Math.sign(this.dx)}get vt(){return this.Jt<0}get Nt(){return this.Jt>0}get Tt(){return this.Xt<0}get yt(){return this.Xt>0}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}update(){super.update(),this.Zt=this.Nt}}class x extends I{kt=0;get data(){return this.k}get duration(){return this.data.duration??1}K(){this.U=this.L(a,{name:this.data.name,tag:this.data.tag})}q(){this.J>this.duration&&this.remove()}}class _ extends x{K(){this.U=this.L(a,{name:"confetti"})}q(){this.y-=(1*Math.sin(3*this.J)+12)*h.p}At(t){t.G(this.x+3*Math.sin(4*this.J),this.y),this.U.At(t),t.pop()}}class Y extends x{kt=.3;K(){this.U=this.L(a,{name:"crash"})}}class R extends I{Lt}class m extends R{kt=0;Wt=64;jt;St;Kt;K(){this.U=this.L(a,{name:"collect",tag:"coin",duration:.8})}q(){if(void 0!==this.jt&&(this.jt=C(this.jt,0,h.p),this.jt<2&&(h.V(.3)?this.visible&&(this.visible=!1):h.V(.1)&&(this.visible||(this.visible=!0))),0===this.jt&&(this.parent.Ot(),this.remove())),void 0!==this.Lt){if(this.Lt=C(this.Lt,0,h.p),this.U.duration=.16,0===this.Lt){let t=this.parent.L(x,{name:"fx_collect",duration:.3});t.x=this.x,t.y=this.y,this.parent.zt(this),this.remove()}}else this.dy=Math.sin(3*this.J)}}class p extends I{}class V extends p{w=8;t=8;K(){this.U=this.L(a,{name:"crawler"}),this.dx=1.2}q(){this.U.ht=this.Pt}}class k extends I{kt=0;K(){this.U=this.L(a,{name:"flies",duration:1})}}class W extends I{kt=0;Vt=!1;K(){this.L(a,{name:"main_char",tag:"die",loop:!1})}}class J extends I{K(){this.L(a,{name:"main_char",tag:"victory"})}}class X extends I{w=8;t=8;qt=0;$t=0;tA=2;AA=0;iA;sA=!1;nA=!1;K(){this.U=this.L(a,{name:"main_char"})}q(){if(this.qt>0)return void(this.qt=C(this.qt,0,h.p));let t=B("x"),A=B("ArrowLeft")||B("a"),i=B("ArrowRight")||B("d"),s=B("ArrowUp")||B("w");if(this.sA=A,this.nA=i,this.dx=A?-8:i?8:0,s?void 0!==this.AA&&(this.AA+=h.p):void 0===this.AA?this.AA=0:this.AA>0&&(this.AA=-.3),void 0!==this.AA&&this.AA<0&&(this.AA+=h.p,this.AA>=0&&(this.AA=void 0)),void 0!==this.AA&&this.AA>0)if(void 0!==this.iA)this.dy=-40,this.AA=void 0,this.tA=1,d.play("jump");else if(this.tA>0){this.dy=-40,this.AA=void 0,this.tA=0,d.play("djump");let t=this.parent.L(x,{name:"fx_djump",duration:.4});t.x=this.x,t.y=this.y+5}if(this.Nt?this.iA=0:this.Zt&&(this.iA=.16),void 0!==this.iA&&this.iA>0&&(this.iA=C(this.iA,0,h.p),0===this.iA&&(this.iA=void 0)),this.Nt?0!==this.dx?(this.U.Qt("run"),this.U.ht=this.Pt):this.U.Qt("idle"):(this.U.Qt("jump"),0!==this.Pt&&(this.U.ht=this.Pt)),t&&0===this.$t){let t=this.parent.j(N,{dx:this.dx,dy:10});t.x=this.x,t.y=this.y,this.dx*=-6,this.$t=.2}this.$t=C(this.$t,0,h.p)}$(){}}class Z extends e{w=4;t=4;x;y;dx;dy;q(){this.dy=Math.sin(8*this.J)*Math.sin(16*this.J)*20,this.J>1.5&&this.remove()}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}}class N extends Z{get data(){return this.k}K(){this.dx=2*this.data.dx,this.dy=this.data.dy,this.L(a,{name:"bullet"})}}class H extends e{hA=[];zt(t){t.St&&this.hA.push([t.St,t.Kt])}Ot(){let t=this.hA.pop();if(t){let A=this.L(m);A.x=t[0],A.y=t[1],A.St=t[0],A.Kt=t[1]}}get data(){return this.k}get Ut(){return this.parent.v(U)}h;eA=0;aA=0;BA=this.eA;gA=this.aA;get QA(){return 4*this.h[0].length}rA(t,A,i){return!!this.lA(t,A,i)}lA(t,A,i){let{x:s,y:n,w:h,t:e}=t;return this.oA(s-h/2+A,n-e/2+i,h,e)}oA(t,A,i=1,s=1){let n=this.h[0].length,h=this.h.length,e=t/4,a=A/4,B=(t+i-1)/4,g=(A+s-1)/4;if(e<0||B>=n||a<0||g>=h)return!0;for(t=e;t<=B;t++)for(A=a;A<=g;A++)if(t=Math.floor(t),A=Math.floor(A),P(this.h[A][t]))return[4*t,4*A]}K(){let t=s.i[this.data.level-1];this.h=[];for(let i=0;i<t.t;i++)this.h[i]=Array(t.w);let A=0;for(let i=0;i<t.A.length;i++){let{px:s,src:n}=t.A[i],h=s[0]/4,e=s[1]/4,a=n[1]/4*20+n[0]/4;if(399===a){let t=this.L(X);t.x=s[0],t.y=s[1];let A=this.L(k);A.x=s[0],A.y=s[1]-8}else if(398===a){let t=this.L(V);t.x=s[0],t.y=s[1]}else if(397===a){let t=this.L(m);t.x=s[0],t.y=s[1],t.St=s[0],t.Kt=s[1],A++}else this.h[e][h]=a}this.wA=A}wA=0;O(){this.Ut.Yt=this.wA}q(){let t=this.v(X);if(t&&this.Ut.done){let A=this.L(J);A.x=t.x,A.y=t.y,t.remove(),this.v(k)?.remove(),this.Ut.L(f)}if(this.P(V).forEach((t=>{!this.rA(t,Math.sign(t.dx),0)&&this.rA(t,4*Math.sign(t.dx),1)||(t.dx*=-1)})),t&&0===t.qt){this.X.filter((t=>t instanceof R)).forEach((A=>{void 0===A.Lt&&E(A,t)&&(A.Lt=.3,A.dy=-8,this.Ut?._t())})),this.X.filter((t=>t instanceof p)).forEach((A=>{if(E(A.Rt,t.Rt)){if(0===this.Ut.width){t.remove();let A=this.L(W);A.x=t.x,A.y=t.y,this.Ut.It=2}t.L(x,{name:"fx_flash"}),d.play("damage"),t.qt=.6,t.dy=-32,0===t.dx?t.dx=6.4:t.dx=8*-Math.sign(t.dx)*.8;for(let A=0;A<this.Ut.width;A++){let i=this.L(m);i.x=t.x,i.y=t.y,i.dx=8*Math.sin(A/this.Ut.width*Math.PI*2),i.dy=80*Math.cos(A/this.Ut.width*Math.PI*2),i.jt=5}this.Ut.width=0}}))}if(t&&void 0===t.Ht){let A=this.rA(t,0,2),i=this.lA(t,1,-1)?void 0:this.lA(t,1,0),s=this.lA(t,-1,-1)?void 0:this.lA(t,-1,0);A||(t.nA&&Array.isArray(i)?(t.Ht=.2,t.x=i[0],t.y=i[1]):t.sA&&Array.isArray(s)&&(t.Ht=-.2,t.x=s[0]+4,t.y=s[1]))}if(t&&!t.Ht&&void 0===t.bt){let A=this.lA(t,1,-4)?void 0:this.lA(t,1,0),i=this.lA(t,-1,-4)?void 0:this.lA(t,-1,0);t.nA&&Array.isArray(A)?(t.bt=.16,t.x=A[0],t.y=A[1]-1):t.sA&&Array.isArray(i)&&(t.bt=-.16,t.x=i[0]+4,t.y=i[1]-1)}this.X.filter((t=>t instanceof I)).forEach((t=>{let A=this.lA(t,0,0);if(void 0!==t.Ht)return t.Ht=C(t.Ht,0,h.p),void(0===t.Ht&&(t.Ht=void 0,t.y=A[1]-4,t.dy=0));if(void 0!==t.bt)return t.bt=C(t.bt,0,h.p),void(0===t.bt&&(t.bt=void 0,t.y=A[1]-4,t.dy=0));let i=4*t.kt,s=0;{let A=Math.abs(t.dy),n=Math.sign(t.dy);for(let e=0;e<A;e+=1){let a=.5*n*Math.sqrt(h.p);if(this.rA(t,0,a)){t.Jt=n,t.dy/=2,s=0;break}t.Jt=0,t.y+=a,s=1-n*(e/A);{let A=t.Wt*i*Math.sqrt(s),n=1;t.dy+=n*A*h.p}}}{let A=3*i,s=1;for(let i=0;i<A;i+=1){let A=.5*s*Math.sqrt(h.p);if(this.rA(t,0,A)){t.Jt=s,t.dy=0;break}t.Jt=0,t.y+=A}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.p)*s;if(this.rA(t,A,0)){t.Xt=i,t.dx=0;break}t.Xt=0,t.x+=A}}}));let A=this.v(J);if(A&&h.V(.6))for(let h=0;h<4;h++){let t=this.L(_);t.x=h/3*64+3*Math.sin(6*this.J),t.y=64}let i=t||A;if(i&&(this.BA<i.x-4-1&&(this.BA=i.x-4-1),this.BA>i.x+4+1&&(this.BA=i.x+4+1),this.gA<i.y-8&&(this.gA=i.y-8),this.gA>i.y+8&&(this.gA=i.y+8)),i){let t=i.dx<0?-50:i.dx>0?-10:-32;this.eA=C(this.eA,this.BA+t,50*h.p),this.aA=this.gA-32,this.eA=Math.min(Math.max(0,this.eA),this.QA)}this.v(W)&&(this.eA=C(this.eA,this.eA+8*Math.sin(9*this.J),8*h.p),this.aA=C(this.aA,this.aA+8*Math.cos(9*this.J),8*h.p)),this.X.filter((t=>t instanceof Z)).forEach((t=>{{let A=Math.abs(t.dy),i=Math.sign(t.dy);for(let s=0;s<A;s+=1){let A=.5*i*Math.sqrt(h.p);if(this.rA(t,0,A)){t.dy/=2;break}t.y+=A;{let A=1,i=1;t.dy+=i*A*h.p}}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.p)*s;if(this.rA(t,A,0)){t.dx=0;let A=this.j(Y);A.x=t.x-2*i,A.y=t.y,A.U.ht=i,this.remove(t);break}t.x+=A}}}));let s=this.v(k);s&&t&&(s.x=C(s.x,t.x+4*Math.cos(8*t.J),30*h.p),s.y=C(s.y,t.y-8+8*Math.sin(8*t.J),26*h.p),Math.abs(s.x-t.x)+Math.abs(s.y-t.y)<=16?s.U.Qt("idle"):s.U.Qt("run"),s.U.ht=t.U.ht);let n="none";if(t&&t.Nt&&0!==t.dx&&h.V(.3+.5*Math.random())&&(n="idle"),t&&!t?.Zt&&t.Nt&&(n="jump"),t&&"none"!==n){let A=this.L(x,{name:"fx_dust",tag:n,duration:.4});A.x=t.x,"idle"===n&&(A.x+=4*-Math.sign(t.dx)),A.y=t.y,A.U.ht=Math.max(1,Math.sign(t.dx))}}tt(t){t.G(-this.eA,-this.aA);for(let A=0;A<this.h.length;A++){let i=this.h[A];for(let s=0;s<i.length;s++){let n=i[s];t.m(n,4*s,4*A)}}}At(t){t.pop()}}const b=[0,1,2,3,4,5,20,21,22,23,24,40,41,42,44,60,61,62,63,64,80,81,82,83],P=t=>b.includes(t);!function(t){let A=function(t,A,i=!0){let s=document.createElement("canvas");i&&s.classList.add("pixelated");let h=s.getContext("2d");const e=()=>{s.width=t,s.height=A,h.imageSmoothingEnabled=i};return document.addEventListener("scroll",e,{capture:!0,passive:!0}),window.addEventListener("resize",e,{passive:!0}),e(),new n(s,h)}(64,64,!0);t.appendChild(A.canvas),M(A)}(document.getElementById("app"));
