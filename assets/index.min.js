const t=""+new URL("out_0-BH-Pp6vG.png",import.meta.url).href,i=[{n:"Level_0",w:64,t:21,i:"AQRcAD8YPxw/ID8kPyg/LD8wPzQ/OBg8PzwXQBhAP0AWRBdEGEQqRD9EFUgWSBdIGEg7SDxIPUg+SD9IFEwVTBZMF0wYTBlMGkwbTBxMHUweTB9MIEwhTCJMI0wkTCVMJkwnTChMO0wAUAFQAlADUARQBVAGUAdQCFAJUApQC1AMUA1QDlAPUBBQEVASUBNQFFAVUBZQF1AYUBlQGlAbUBxQHVAeUB9QIFAhUCJQI1AkUCVQJlAnUChQO1AAEAQAL0gzSDZIOkgBEAYAKkgwSDRIN0gpTDxMAQwDACtENEQZSAAMCQAXPBZAKkAVRDNEPkQUSClIE0wABA8APhg+HD4gPiQ+KD4sPjA+ND44PjwzQD5AKUQ6TDpQAQgNAC80K0gsSC1ILkgxSDJINUg4SDlIPUw+TD9MAgQHABk8GUArQDRAGUQpUDxQAQA1AD8ULzAYOCxELUQuRC9EMEQxRDJENUQ2RDdEOEQ5RDpEO0Q8RD1EGkgbSBxIHUgeSB9IIEghSCJII0gkSCVIJkgnSChIAEwBTAJMA0wETAVMBkwHTAhMCUwKTAtMDEwNTA5MD0wQTBFMEkwACAQALjQvTDNMNkwCCAUAMDQqTDBMNEw3TAIABAAwMBk4Kzw0PAAACgA+FC4wFzgWPCo8MzwVQClAFEQTSAQAFwAEFAUUBhQHFAgUCRQKFAsUFBQVFBYUFxQYFB8UIBQhFCIUIxQkFCUUJhQfPCA8BQAEAAwUGRQnFCE8AwAEAAMUExQeFB48E0wBABFIEUwUABAIHAgEDAcMCQwkDCYMLCguKDAoMigYMB00HzQhNCM0FTwuQDFAE0Q="}];function s(t){function i(t){function i(t){return[4*(t%1024),4*Math.floor(t/1024)]}let s=[],e=function(t){const i=atob(t),s=i.length,e=new Uint8Array(s);for(let n=0;n<s;n++)e[n]=i.charCodeAt(n);return new Uint16Array(e.buffer)}(t);for(let n=0;n<e.length;){let t=e[n];n++;let h=e[n];n++;let r=[...e.slice(n,n+h)];n+=h,s.push(...r.map((s=>({src:i(t),px:i(s)}))))}return s}return t.map((t=>{let{n:s,w:e,t:n,i:h}=t;return{name:s,w:e,t:n,i:i(h)}}))}const e=new class{image;info;h;l;async load(){var e;this.image=await(e=t,new Promise((t=>{let i=new Image;i.onload=()=>t(i),i.src=e}))),this.info="bullet\n\n0*0*idle\n\n0*144*170\n\n\ncollect\n\n0*2*coin\n\n0*144*178\n0*144*200\n0*144*208\n\n\ncrash\n\n0*2*idle\n\n0*80*216\n0*88*216\n0*96*216\n\n\ncrawler\n\n0*1*idle\n\n0*104*216\n0*112*216\n\n\nfx_collect\n\n0*1*idle\n\n0*120*216\n0*128*216\n\n\nfx_djump\n\n0*1*idle\n\n0*136*216\n0*144*216\n\n\nfx_flash\n\n0*1*idle\n\n0*80*186\n0*88*186\n\n\nloading\n\n0*1*audio\n2*4*input\n\n4*0*80\n4*0*110\n4*0*140\n4*0*170\n4*0*200\n\n\nmain_char\n\n0*1*idle\n2*3*run\n4*6*jump\n\n0*96*186\n0*104*186\n0*112*186\n0*120*186\n0*128*186\n0*136*186\n0*144*186\n\n\nnpc\n\n0*0*idle\n\n3*80*200\n\n\ntest\n\n0*2*idle\n3*4*attack\n\n1*128*200\n1*80*170\n1*96*170\n1*112*170\n1*128*170\n\n\ntiles\n\n0*0*idle\n\n2*0*0".split(/\r?\n\r?\n\r?\n/).map((t=>{let[i,s,e]=t.split(/\r?\n\r?\n/);return{name:i,tags:s.split(/\r?\n/).map((t=>{let[i,s,e]=t.split("*");return{from:parseInt(i),to:parseInt(s),name:e}})),o:e.split(/\r?\n/).map((t=>{let[i,s,e,n,h,r,a,l]=function(t){let[i,s,e]=t,n=0,h=0,[r,a]=0===i?[8,8]:1===i?[16,16]:2===i?[80,80]:4===i?[80,30]:[0,0],[l,o]=[r,a];return[n,h,r,a,s,e,l,o]}(t.split("*").map((t=>parseInt(t))));return{fx:i,fy:s,u:e,_:n,A:h,M:r,p:a,m:l}}))}})),this.l=this.info.find((t=>"tiles"===t.name)).o[0],console.log(this.info),this.h=s(i)}};class n{constructor(t,i){this.canvas=t,this.v=i}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){let{v:t}=this;t.clearRect(0,0,this.width,this.height)}fr(t,i,s,e,n){let{v:h}=this;h.fillStyle=n,h.fillRect(t,i,s,e)}U(t,i){let{v:s}=this;s.save(),s.translate(Math.floor(t),Math.floor(i))}pop(){let{v:t}=this;t.restore()}B(t,i,s,e=1,n=1){let{fx:h,fy:r,A:a,M:l,p:o,m:u}=t.D,{C:c,k:d}=t,f=i-h-c,_=s-r-d;this.I(f,_,a,l,o,u,e,n)}F(t,i,s){let{fx:n,fy:h,A:r,M:a}=e.l,l=i-n,o=s-h,u=t%20*4,c=4*Math.floor(t/20);this.I(l,o,r+u,a+c,4,4)}I(t,i,s,n,h,r,a=1,l=1){let{v:o}=this,{image:u}=e;o.save();let c=h,d=r,f=c*Math.abs(a),_=d*Math.abs(l);o.scale(Number(a.toFixed(2)),Number(l.toFixed(2))),a<0&&(t*=-1,t-=f),l<0&&(i*=-1,i-=_),o.drawImage(u,s,n,c,d,Math.round(t),Math.round(i),Math.round(f),Math.round(_)),o.restore()}}const h={T:16};class r{P;S(t){return this.P=t,this}parent;R;N;L;V;J(t,i){this.V.push([t,i])}constructor(){this.L=[],this.N=[],this.V=[]}j(t){return this.N.filter((i=>i instanceof t))}G(t){return this.N.find((i=>i instanceof t))}H(t,i){let s=(new t).S(i).init();return s.parent=this,s}K(t,i={}){let s=this.H(t,i);return this.N.push(s),s}Y(t,i={},s=7){let e=this.H(t,i);return this.N.push(e),this.L.push([e,s]),e}remove(t){if(!t)return void this.parent?.remove(this);let i=this.N.indexOf(t);if(-1===i)throw"noscene rm";this.N.splice(i,1),i=this.L.findIndex((([i])=>i===t)),-1!==i&&this.L.splice(i,1)}init(){return this.R=0,this.O(),this}update(){0===this.R&&this.Z(),this.N.forEach((t=>t.update())),this.R+=h.T,this.V=this.V.map((([t,i])=>(t-h.T<0&&i(),[t-h.T,i]))).filter((t=>t[0]>0)),this.L.slice(0).forEach((([t,i])=>{let s=this.L.filter((i=>i[0].constructor.name===t.constructor.name));if(s.length>i){let t=s[0][0];this.remove(t)}})),this.q(),this.W()}draw(t){this.$(t),this.N.forEach((i=>i.draw(t))),this.X(t)}O(){}Z(){}q(){}W(){}X(t){}$(t){}}class a extends r{get data(){return this.P}get info(){let t=e.info.find((t=>t.name===this.tt));if(!t)throw`nosprite ${this.tt}`;return t}get duration(){return this.data.duration??400}set duration(t){this.data.duration=t}get tag(){let t=this.info.tags.find((t=>t.name===this.it));if(!t)throw`notag ${this.tt} ${this.it}`;return t}get tt(){return this.data.name}get it(){return this.data.tag||"idle"}x=0;y=0;st=1;et=1;nt(t,i){this.x=t,this.y=i}_current_frame=0;get D(){let{from:t}=this.tag;return this.info.o[this._current_frame+t]}get ht(){return this.data.ht??"c"}get C(){if("tl"===this.ht)return 0;let{u:t}=this.D;return"c"===this.ht||"bc"===this.ht?t/2:0}get k(){if("tl"===this.ht)return 0;let{_:t}=this.D;return"c"===this.ht?t/2:"bc"===this.ht?t:0}rt(t){this.data.tag!==t&&(this.data.tag=t,this._current_frame=0,this.lt=0)}lt=0;q(){let{from:t,to:i}=this.tag,{duration:s}=this,e=s/(i-t+1),n=i-t;this.lt+=1e3*h.T,this.lt>=e&&(this.lt-=e,this._current_frame===n?this._current_frame=0:this._current_frame+=1)}X(t){let{x:i,y:s,st:e,et:n}=this;t.B(this,i,s,e,n)}}const l=function(){let t=new Set;return document.addEventListener("keydown",(i=>{return s=i.key,void t.add(s);var s})),document.addEventListener("keyup",(i=>{return s=i.key,void t.delete(s);var s})),i=>[...t].includes(i)}();var o=function(){var t,i,s,e,n,h=function(t){return Math.sin(6.283184*t)},r=function(t){return.003959503758*2**((t-128)/12)},a=function(t,i,s){var e,n,h,a,o,u,c=l[t.ot[0]],d=t.ot[1],f=t.ot[3]/32,_=l[t.ot[4]],A=t.ot[5],g=t.ot[8]/32,w=t.ot[9],M=t.ot[10]*t.ot[10]*4,p=t.ot[11]*t.ot[11]*4,x=t.ot[12]*t.ot[12]*4,m=1/x,Q=-t.ot[13]/16,v=t.ot[14],U=s*2**(2-t.ot[15]),y=new Int32Array(M+p+x),B=0,D=0;for(e=0,n=0;e<M+p+x;e++,n++)n>=0&&(n-=U,o=r(i+(15&(v=v>>8|(255&v)<<4))+t.ot[2]-128),u=r(i+(15&v)+t.ot[6]-128)*(1+8e-4*t.ot[7])),h=1,e<M?h=e/M:e>=M+p&&(h=(1-(h=(e-M-p)*m))*3**(Q*h)),a=c(B+=o*h**f)*d,a+=_(D+=u*h**g)*A,w&&(a+=(2*Math.random()-1)*w),y[e]=80*a*h|0;return y},l=[h,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var i=t%1*4;return i<2?i-1:3-i}];this.init=function(h){t=h,i=h.ut,s=0,e=h.ct*h.dt*(i+1)*2,n=new Int32Array(e)},this.ft=function(){var r,o,u,c,d,f,_,A,g,w,M,p,x,m,Q=new Int32Array(e),v=t._t[s],U=t.ct,y=t.dt,B=0,D=0,C=!1,E=[];for(u=0;u<=i;++u)for(_=v.At[u],c=0;c<y;++c){var k=_?v.c[_-1].f[c]:0;k&&(v.ot[k-1]=v.c[_-1].f[c+y]||0,k<17&&(E=[]));var I=l[v.ot[16]],F=v.ot[17]/512,T=2**(v.ot[18]-9)/U,b=v.ot[19],P=v.ot[20],S=43.23529*v.ot[21]*3.141592/44100,R=1-v.ot[22]/255,N=1e-5*v.ot[23],z=v.ot[24]/32,L=v.ot[25]/512,V=6.283184*2**(v.ot[26]-9)/U,J=v.ot[27]/255,j=v.ot[28]*U&-2;for(M=(u*y+c)*U,d=0;d<4;++d)if(f=_?v.c[_-1].n[c+d*y]:0){E[f]||(E[f]=a(v,f,U));var G=E[f];for(o=0,r=2*M;o<G.length;o++,r+=2)Q[r]+=G[o]}for(o=0;o<U;o++)(w=Q[A=2*(M+o)])||C?(p=S,b&&(p*=I(T*A)*F+.5),D+=(p=1.5*Math.sin(p))*(x=R*(w-D)-(B+=p*D)),w=3==P?D:1==P?x:B,N&&(w=(w*=N)<1?w>-1?h(.25*w):-1:1,w/=N),C=(w*=z)*w>1e-5,m=w*(1-(g=Math.sin(V*A)*L+.5)),w*=g):m=0,A>=j&&(m+=Q[A-j+1]*J,w+=Q[A-j]*J),Q[A]=0|m,Q[A+1]=0|w,n[A]+=0|m,n[A+1]+=0|w}return++s/t.gt},this.wt=function(t){for(var i=t.createBuffer(2,e/2,44100),s=0;s<2;s++)for(var h=i.getChannelData(s),r=s;r<e;r+=2)h[r>>1]=n[r]/65536;return i}};const u={_t:[{ot:[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,130,4],At:[1,2,1,2,,,,,,1,2,1,2,,,2,1,,,1,2,1,2],c:[{n:[135,,,,,,,,139,,,,142,,,,147,,,,,,,,139],f:[]},{n:[142,,,,,,,,147,,,,139,,,,135,,,,,,,,135],f:[]}]},{ot:[2,61,128,0,3,91,128,0,0,0,5,6,58,0,0,0,0,195,6,1,3,135,0,0,32,147,6,121,6],At:[1,2,1,2,1,2,1,2,1,1,2,2,1,4,3,3,4,3,4,1,2,1,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,147,,,,,,,,135,,,,,,,,139,,,,,,,,151,,,,,,,,139,,,,,,,,139,,,,,,,,154,,,,,,,,142,,,,,,,,142,,,,,,,,142],f:[]},{n:[,,,,147,,,,,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,139,,,,,,,,139,,,,,,,,151,,,,,,,,139,,,,,,,,142,,,,,,,,154,,,,,,,,142,,,,,,,,142],f:[]},{n:[144,,,,,,,,144,,,,,,,,144,,,,,,,,144,,,,,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[]},{n:[144,,,,,,,,144,,,,,,,,156,,,,,,,,144,,,,,,,,139,,,,,,,,151,,,,,,,,139,,,,,,,,139,,,,,,,,147,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[]}]},{ot:[1,104,128,0,0,99,116,9,0,28,17,15,25,135,106,0,0,186,3,1,1,23,167,0,32,77,6,13,1],At:[,,1,2,1,1,2,2,,1,2,,,3,4,3,3,4,4,4,1,2],c:[{n:[135,,139,,154,,147,,135,,139,,154,,151,,139,,142,,151,,,,139,,142,,154],f:[]},{n:[139,,142,,154,,,,139,,142,,154,,,,154,,151,,147,,,,154,,151,,147],f:[]},{n:[144,,139,,144,,151,,135,,139,147,147,,,,135,,139,147,147,,,,135,,139,156,156],f:[]},{n:[151,,139,,151,,139,,156,,144,151,151,,,,151,,144,151,147,,,,147,,139,147,135],f:[]}]}],ct:7350,dt:32,ut:22,gt:3},c=function(){let t=new AudioContext,i=t.createGain();i.connect(t.destination);const s={},e=[{name:"song",data:u}];return{ft:()=>(e.forEach((i=>{let e=new o;e.init(i.data),function n(){if(1===e.ft()){let n=e.wt(t);((t,i)=>{s[t]=i})(i.name,n)}else setTimeout(n,0)}()})),new Promise((t=>{!function i(){Object.keys(s).length!==e.length?setTimeout(i,100):t()}()}))),play:(e,n=!1)=>{const h=s[e];if(!h)return;let r=t.createBufferSource(),a=t.createGain();return r.buffer=h,r.connect(a),a.connect(i),r.loop=n,a.gain.value=.8,r.start(),()=>{r.stop()}}}}();function d(t,i,s){return t<i?Math.min(t+s,i):t>i?Math.max(t-s,i):t}function f(t,i){return t.x<i.x+i.w&&t.x+t.w>i.x&&t.y<i.y+i.t&&t.y+t.t>i.y}function _(t){let i;const s=e=>{i=new e,i.S({g:t,go:s}),i.init()};s(g),function(t){let i;const s=e=>{h.T=Math.min(20,Math.max(16,i?e-i:16))/1e3,i=e,t(),requestAnimationFrame(s)};requestAnimationFrame(s)}((()=>{i.update(),t.clear(),t.fr(0,0,64,64,"hsl(20, 5%, 50%)"),t.fr(1,1,62,62,"hsl(70, 15%, 30%)"),i.draw(t)}))}class A extends r{Mt=!1;xt;get data(){return this.P}get g(){return this.data.g}go(t){this.data.go(t)}update(){l("m")?this.Mt||(this.Mt=!0,this.xt?(this.xt(),this.xt=void 0):this.xt=c.play("song",!0)):this.Mt=!1,super.update()}}class g extends A{O(){e.load().then((()=>{let t=this.K(a,{name:"loading",tag:"audio",duration:1e3});t.x=32,t.y=32,c.ft().then((()=>{this.go(w)}))}))}}class w extends A{O(){this.K(C)}}class M extends r{get Qt(){return{x:this.x,y:this.y,w:this.w/2,t:this.t/2}}B;vt=1;Ut=.8;w=4;t=4;grid;dx=0;dy=0;x=0;y=0;yt=0;Bt=0;Dt=this.Ct;Et;kt;get It(){return Math.sign(this.dx)}get Ft(){return this.yt<0}get Ct(){return this.yt>0}get Tt(){return this.Bt<0}get bt(){return this.Bt>0}draw(t){t.U(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}update(){super.update(),this.Dt=this.Ct}}class p extends M{vt=0;get data(){return this.P}get duration(){return this.data.duration??1}O(){this.B=this.K(a,{name:this.data.name})}q(){this.R>this.duration&&this.remove()}}class x extends p{vt=.3;O(){this.B=this.K(a,{name:"crash"})}}class m extends M{Pt}class Q extends m{vt=0;Ut=64;O(){this.B=this.K(a,{name:"collect",tag:"coin",duration:800})}q(){if(void 0!==this.Pt){if(this.Pt=d(this.Pt,0,h.T),this.B.duration=160,0===this.Pt){let t=this.parent.K(p,{name:"fx_collect"});t.x=this.x,t.y=this.y,this.remove()}}else this.dy=Math.sin(3*this.R)}}class v extends M{}class U extends v{w=8;t=8;O(){this.B=this.K(a,{name:"crawler"}),this.dx=1.2}q(){0!==this.Bt&&(this.dx=-this.Bt),this.B.st=this.It}}class y extends M{w=8;t=8;St=0;Rt=0;Nt=2;zt=0;Lt;Vt=!1;Jt=!1;O(){this.B=this.K(a,{name:"main_char"})}q(){if(this.St>0)return void(this.St=d(this.St,0,h.T));let t=l("x"),i=l("ArrowLeft")||l("a"),s=l("ArrowRight")||l("d"),e=l("ArrowUp")||l("w");if(this.Vt=i,this.Jt=s,this.dx=i?-8:s?8:0,e?void 0!==this.zt&&(this.zt+=h.T):void 0===this.zt?this.zt=0:this.zt>0&&(this.zt=-.3),void 0!==this.zt&&this.zt<0&&(this.zt+=h.T,this.zt>=0&&(this.zt=void 0)),void 0!==this.zt&&this.zt>0)if(void 0!==this.Lt)this.dy=-40,this.zt=void 0,this.Nt=1;else if(this.Nt>0){this.dy=-40,this.zt=void 0,this.Nt=0;let t=this.parent.K(p,{name:"fx_djump",duration:.4});t.x=this.x,t.y=this.y+5}if(this.Ct?this.Lt=0:this.Dt&&(this.Lt=.16),void 0!==this.Lt&&this.Lt>0&&(this.Lt=d(this.Lt,0,h.T),0===this.Lt&&(this.Lt=void 0)),this.Ct?0!==this.dx?(this.B.rt("run"),this.B.st=this.It):this.B.rt("idle"):(this.B.rt("jump"),0!==this.It&&(this.B.st=this.It)),t&&0===this.Rt){let t=this.parent.Y(D,{dx:this.dx,dy:10});t.x=this.x,t.y=this.y,this.dx*=-6,this.Rt=.2}this.Rt=d(this.Rt,0,h.T)}W(){}}class B extends r{w=4;t=4;x;y;dx;dy;q(){this.dy=Math.sin(8*this.R)*Math.sin(16*this.R)*20,this.R>1.5&&this.remove()}draw(t){t.U(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}}class D extends B{get data(){return this.P}O(){this.dx=2*this.data.dx,this.dy=this.data.dy,this.K(a,{name:"bullet"})}}class C extends r{l;jt=0;Gt=0;Ht=this.jt;Kt=this.Gt;get Yt(){return 4*this.l[0].length}Ot(t,i,s){return!!this.Zt(t,i,s)}Zt(t,i,s){let{x:e,y:n,w:h,t:r}=t;return this.qt(e-h/2+i,n-r/2+s,h,r)}qt(t,i,s=1,e=1){let n=this.l[0].length,h=this.l.length,r=t/4,a=i/4,l=(t+s-1)/4,o=(i+e-1)/4;if(r<0||l>=n||a<0||o>=h)return!0;for(t=r;t<=l;t++)for(i=a;i<=o;i++)if(t=Math.floor(t),i=Math.floor(i),k(this.l[i][t]))return[4*t,4*i]}O(){let t=e.h[0];this.l=[];for(let i=0;i<t.t;i++)this.l[i]=Array(t.w);for(let i=0;i<t.i.length;i++){let{px:s,src:e}=t.i[i],n=s[0]/4,h=s[1]/4,r=e[1]/4*20+e[0]/4;if(399===r){let t=this.K(y);t.x=s[0],t.y=s[1]}else if(398===r){let t=this.K(U);t.x=s[0],t.y=s[1]}else if(397===r){let t=this.K(Q);t.x=s[0],t.y=s[1]}else this.l[h][n]=r}}q(){let t=this.G(y);if(this.N.filter((t=>t instanceof m)).forEach((i=>{void 0===i.Pt&&f(i,t)&&(i.Pt=.3,i.dy=-8)})),0===t.St){this.N.filter((t=>t instanceof v)).forEach((i=>{f(i.Qt,t.Qt)&&(t.K(p,{name:"fx_flash"}),t.St=1,t.dy=-32,0===t.dx?t.dx=6.4:t.dx=8*-Math.sign(t.dx)*.8)}))}if(void 0===t.Et){let i=this.Ot(t,0,2),s=this.Zt(t,1,-1)?void 0:this.Zt(t,1,0),e=this.Zt(t,-1,-1)?void 0:this.Zt(t,-1,0);i||(t.Jt&&Array.isArray(s)?(t.Et=.2,t.x=s[0],t.y=s[1]):t.Vt&&Array.isArray(e)&&(t.Et=-.2,t.x=e[0]+4,t.y=e[1]))}if(!t.Et&&void 0===t.kt){let i=this.Zt(t,1,-4)?void 0:this.Zt(t,1,0),s=this.Zt(t,-1,-4)?void 0:this.Zt(t,-1,0);t.Jt&&Array.isArray(i)?(t.kt=.16,t.x=i[0],t.y=i[1]-1):t.Vt&&Array.isArray(s)&&(t.kt=-.16,t.x=s[0]+4,t.y=s[1]-1)}this.N.filter((t=>t instanceof M)).forEach((t=>{let i=this.Zt(t,0,0);if(void 0!==t.Et)return t.Et=d(t.Et,0,h.T),void(0===t.Et&&(t.Et=void 0,t.y=i[1]-4,t.dy=0));if(void 0!==t.kt)return t.kt=d(t.kt,0,h.T),void(0===t.kt&&(t.kt=void 0,t.y=i[1]-4,t.dy=0));let s=4*t.vt,e=0;{let i=Math.abs(t.dy),n=Math.sign(t.dy);for(let r=0;r<i;r+=1){let a=.5*n*Math.sqrt(h.T);if(this.Ot(t,0,a)){t.yt=n,t.dy/=2,e=0;break}t.yt=0,t.y+=a,e=1-n*(r/i);{let i=t.Ut*s*Math.sqrt(e),n=1;t.dy+=n*i*h.T}}}{let i=3*s,e=1;for(let s=0;s<i;s+=1){let i=.5*e*Math.sqrt(h.T);if(this.Ot(t,0,i)){t.yt=e,t.dy=0;break}t.yt=0,t.y+=i}}{let i=Math.abs(t.dx),s=Math.sign(t.dx),e=1;for(let n=0;n<i;n+=1){let i=.5*s*Math.sqrt(h.T)*e;if(this.Ot(t,i,0)){t.Bt=s,t.dx=0;break}t.Bt=0,t.x+=i}}})),t&&(this.Ht<t.x-4-1&&(this.Ht=t.x-4-1),this.Ht>t.x+4+1&&(this.Ht=t.x+4+1),this.Kt<t.y-20&&(this.Kt=t.y-20),this.Kt>t.y+20&&(this.Kt=t.y+20));let i=t.dx<0?-50:t.dx>0?-10:-32;this.jt=d(this.jt,this.Ht+i,50*h.T),this.Gt=this.Kt-32,this.jt=Math.min(Math.max(0,this.jt),this.Yt),this.N.filter((t=>t instanceof B)).forEach((t=>{{let i=Math.abs(t.dy),s=Math.sign(t.dy);for(let e=0;e<i;e+=1){let i=.5*s*Math.sqrt(h.T);if(this.Ot(t,0,i)){t.dy/=2;break}t.y+=i;{let i=1,s=1;t.dy+=s*i*h.T}}}{let i=Math.abs(t.dx),s=Math.sign(t.dx),e=1;for(let n=0;n<i;n+=1){let i=.5*s*Math.sqrt(h.T)*e;if(this.Ot(t,i,0)){t.dx=0;let i=this.Y(x);i.x=t.x-2*s,i.y=t.y,i.B.st=s,this.remove(t);break}t.x+=i}}}))}$(t){t.U(-this.jt,-this.Gt);for(let i=0;i<this.l.length;i++){let s=this.l[i];for(let e=0;e<s.length;e++){let n=s[e];t.F(n,4*e,4*i)}}}X(t){t.pop()}}const E=[0,1,2,3,4,5,20,21,22,23,24,40,41,42,44,60,61,62,63,64,80,81,82,83],k=t=>E.includes(t);!function(t){let i=function(t,i,s=!0){let e=document.createElement("canvas");s&&e.classList.add("pixelated");let h=e.getContext("2d");const r=()=>{e.width=t,e.height=i,h.imageSmoothingEnabled=s};return document.addEventListener("scroll",r,{capture:!0,passive:!0}),window.addEventListener("resize",r,{passive:!0}),r(),new n(e,h)}(64,64,!0);t.appendChild(i.canvas),_(i)}(document.getElementById("app"));
