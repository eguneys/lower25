const t=""+new URL("out_0-Cp6vHWiI.png",import.meta.url).href,A=[{n:"Level_0",w:112,t:27,A:"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"},{n:"Level_1",w:73,t:37,A:"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"},{n:"Level_2",w:36,t:38,A:"AQQOACA4GFwZXBpcG1wAdAB4AHwAgACEAIgAjACQAJQAEAMAHxgbMBtgARADAAAYICAgPAEMBQAAFCAcIDQgTAGUAAwBABtYAAQTAB8cHyAfJB8oHywfMBs0HzQbOB84GzwfPBtAH0AfRB9IH0wXWBdcAQgkAAEYAhgDGAQYBRgGGAcYCBgJGAoYCxgMGA0YDhgaGBsYHBgdGB4YACwUMCBQIVAiUCNQF2AYYBlgGmAcZCJkI2QheCJ4I3gcgAIEIwAAAAAEAAgADAAQIBgAHAAgACQgJAAoICggLBwwIDAcNBw4ITgcPBxAIEAgRCBIHFQcWBxcHGABdAF4AXwBgAGEAYgBjAGQAQAxAAEUAhQDFAQUBRQGFAcUCBQJFAoUCxQMFA0UDhQaFBsUHBQdFB4UHxQULBssIUwiTCNMGFgZWBpYImAjYABwAXAhdCJ0I3QcfAKUA5QIlAmUCpQQlBGUEpQYlBmUGpQblByUAAgJABkYEzAaMBtEH1AbZCFkIHgbgAIIBgAPGCEgFTAhPBxEHYACAAsADxQgFCEcFSwcLCE0HXwElAuUE5QdlAAACgAZFBMsGiwbVCFgIHQbfAeUD5QXlAQIDAAPMA04C0AJSAdQB1QQVBdUBVwUZBRoFGwEDAEAFCAEBAMAFBgXUBxQBAAvAAEsAiwDLAQsBSwGLAcsCCwJLAosCywMLA0sDiwONAw8FjwXPApECEwGWA5cBGAMYBVgFmACcANwBHAFcAZwB3AIcAlwCnALcAxwDXAOcA9wEHARcBJwE3AhjCKMI4wFAAMAFRwYPB1kAwAEABMcA2ALYCCMAxAPAA80DTwVQAtEFEQTSAlMEkwRUAdYEFgPXAVgDWAUcAMMAQAPLAIMDgANNAs8FTwUQAlEE0QSSAdMEUwQUAVYD1gNXBRgAwgBABQcE0wBAAUQEkwDAB0QDmwiiBFMIQANCCIIAyAGIAogAyQGJAokIiwLNB40DzwNRB5EIkQLTBlQCVQhXAdgHmwedAeIC4gPiBOIGIgFjAmMDYwRjBWMGowIBBcABgAHAAgAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgASBBMEFAQVBBYEFAgWaAcQAwAFABEAEwgIEAYACQAfABcEFQgXaBZsCAwBABpoBwwBABV0BwQFABEEFWgVbBVwAngICCUAAwAEAAoACwAMAA0ADgAPABAAIAAhACIAIwAGBAcECAQYBBkEGgQbBBwEHQQeBBIIFggUDBhoGWgIeAl4D3gQeBF4EngTeBR4FXgJBAIAFnAWdAgAEQAWZBdkGGQZZBtoA3QHdAh0CXQKdA50D3QQdBF0EnQTdBR0BwgHAAIABQQRCBMMGmwHeA54CQgJAAkEHwQXCBUMF2wbbAN4CngWeAkAAQAaZAcAAgAVZAJ0CwwBAAJ8CwAGAAR0BXQGdAt0DHQNdAwAAQAcaAYMEgAIEAkQDRAaEBwQBCgFKAcoGigWOApAEUgiSCNcA2wDkAmQC5AGBBcAChAbEB8QIRgGKAgoCygbKBQ8B0gEbAVsCWwMbBx4CJAKkA+QEJAYkBqQHJAdkAYQEAALEBQoHCghMAs4EEwFVARcAWwHbAhsCmwicBt4HXgCkAYIEgAMEA4QIBAMKBMoDDgJQBNACEghSCNIGlQNWCJcBmwRkBOQGZAGABUAAygJKAooDSgVOBc4GDgSRAZUGFQZVA5YA1wCbAtsIHAhcAeQEpAXkBuQ"}];function i(t){function A(t){function A(t){return[4*(t%1024),4*Math.floor(t/1024)]}let i=[],s=function(t){const A=atob(t),i=A.length,s=new Uint8Array(i);for(let n=0;n<i;n++)s[n]=A.charCodeAt(n);return new Uint16Array(s.buffer)}(t);for(let n=0;n<s.length;){let t=s[n];n++;let h=s[n];n++;let e=[...s.slice(n,n+h)];n+=h,i.push(...e.map((i=>({src:A(t),px:A(i)}))))}return i}return t.map((t=>{let{n:i,w:s,t:n,A:h}=t;return{name:i,w:s,t:n,A:A(h)}}))}const s=new class{image;info;i;h;async load(){var s;this.image=await(s=t,new Promise((t=>{let A=new Image;A.onload=()=>t(A),A.src=s}))),this.info="bullet\n\n0*0*idle\n\n0*144*236\n\n\ncollect\n\n0*2*coin\n\n0*152*236\n0*160*236\n0*168*236\n\n\nconfetti\n\n0*3*idle\n\n0*176*236\n0*184*236\n0*192*236\n0*200*236\n\n\ncrash\n\n0*2*idle\n\n0*208*236\n0*216*236\n0*224*236\n\n\ncrawler\n\n0*1*idle\n\n0*232*236\n0*240*236\n\n\nend\n\n0*4*idle\n\n2*0*0\n2*80*0\n2*160*0\n2*0*80\n2*80*80\n\n\nflies\n\n0*7*idle\n8*13*run\n\n1*160*190\n1*176*190\n1*192*190\n1*208*190\n1*224*190\n1*240*190\n1*240*160\n1*240*80\n1*240*96\n1*240*112\n1*240*128\n1*240*144\n1*240*0\n1*240*16\n\n\nfx_collect\n\n0*2*idle\n\n0*248*236\n0*144*244\n0*152*244\n\n\nfx_djump\n\n0*1*idle\n\n0*160*244\n0*168*244\n\n\nfx_dust\n\n0*4*idle\n5*7*jump\n\n0*176*244\n0*184*244\n0*192*244\n0*200*244\n0*208*244\n0*216*244\n0*224*244\n0*232*244\n\n\nfx_flash\n\n0*1*idle\n\n0*240*244\n0*248*244\n\n\ninfo\n\n0*0*run\n1*1*jump\n2*2*djump\n3*3*shoot\n\n1*240*32\n1*240*48\n1*240*64\n1*0*220\n\n\nloading\n\n0*1*audio\n2*4*input\n\n4*0*160\n4*80*160\n4*160*160\n4*0*190\n4*80*190\n\n\nmain_char\n\n0*2*idle\n3*6*victory\n7*12*run\n13*17*jump\n18*20*die\n\n0*160*206\n0*168*206\n0*176*206\n0*184*206\n0*192*206\n0*200*206\n0*208*206\n0*216*206\n0*224*206\n0*232*206\n0*240*206\n0*248*206\n0*240*176\n0*248*176\n0*0*252\n0*8*252\n0*16*252\n0*24*252\n0*32*252\n0*40*252\n0*48*252\n\n\nnpc\n\n0*0*idle\n\n3*16*220\n\n\nrestart\n\n0*2*idle\n3*6*bg\n\n1*64*220\n1*80*220\n1*96*220\n1*112*220\n1*128*220\n1*144*220\n1*160*220\n\n\ntest\n\n0*2*idle\n3*4*attack\n\n1*176*220\n1*192*220\n1*208*220\n1*224*220\n1*240*220\n\n\ntiles\n\n0*0*idle\n\n2*160*80\n\n\nvictory\n\n0*8*idle\n\n1*0*236\n1*16*236\n1*32*236\n1*48*236\n1*64*236\n1*80*236\n1*96*236\n1*112*236\n1*128*236".split(/\r?\n\r?\n\r?\n/).map((t=>{let[A,i,s]=t.split(/\r?\n\r?\n/);return{name:A,tags:i.split(/\r?\n/).map((t=>{let[A,i,s]=t.split("*");return{from:parseInt(A),to:parseInt(i),name:s}})),B:s.split(/\r?\n/).map((t=>{let[A,i,s,n,h,e,a,B]=function(t){let[A,i,s]=t,n=0,h=0,[e,a]=0===A?[8,8]:1===A?[16,16]:2===A?[80,80]:4===A?[80,30]:[0,0],[B,g]=[e,a];return[n,h,e,a,i,s,B,g]}(t.split("*").map((t=>parseInt(t))));return{fx:A,fy:i,l:s,o:n,C:h,M:e,u:a,F:B}}))}})),this.h=this.info.find((t=>"tiles"===t.name)).B[0],this.i=i(A)}};class n{constructor(t,A){this.canvas=t,this.D=A}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){let{D:t}=this;t.clearRect(0,0,this.width,this.height)}fr(t,A,i,s,n){let{D:h}=this;h.fillStyle=n,h.fillRect(t,A,i,s)}G(t,A){let{D:i}=this;i.save(),i.translate(Math.floor(t),Math.floor(A))}pop(){let{D:t}=this;t.restore()}U(t,A,i,s=1,n=1){let{fx:h,fy:e,C:a,M:B,u:g,F:Q}=t.I,{_:r,Y:l}=t,o=A-h-r,c=i-e-l;this.m(o,c,a,B,g,Q,s,n)}p(t,A,i){let{fx:n,fy:h,C:e,M:a}=s.h,B=A-n,g=i-h,Q=t%20*4,r=4*Math.floor(t/20);this.m(B,g,e+Q,a+r,4,4)}m(t,A,i,n,h,e,a=1,B=1){let{D:g}=this,{image:Q}=s;g.save();let r=h,l=e,o=r*Math.abs(a),c=l*Math.abs(B);g.scale(Number(a.toFixed(2)),Number(B.toFixed(2))),a<0&&(t*=-1,t-=o),B<0&&(A*=-1,A-=c),g.drawImage(Q,i,n,r,l,Math.round(t),Math.round(A),Math.round(o),Math.round(c)),g.restore()}}const h={V:16,time:0,R(t,A=0){let{V:i,time:s}=this;return Math.floor((s-A-i)/t)<Math.floor((s-A)/t)}};class e{W;k(t){return this.W=t,this}visible=!0;parent;J;X;Z;N;T(t,A){this.N.push([t,A])}constructor(){this.Z=[],this.X=[],this.N=[]}H(t){return this.X.filter((A=>A instanceof t))}P(t){return this.X.find((A=>A instanceof t))}v(t,A){let i=(new t).k(A).init();return i.parent=this,i}j(t,A={}){let i=this.v(t,A);return this.X.push(i),i}L(t,A={},i=7){let s=this.v(t,A);return this.X.push(s),this.Z.push([s,i]),s}remove(t){if(!t)return void(this.parent?this.parent.remove(this):this.O());let A=this.X.indexOf(t);if(-1===A)throw"noscene rm";this.X.splice(A,1),A=this.Z.findIndex((([A])=>A===t)),-1!==A&&this.Z.splice(A,1),t.O()}init(){return this.J=0,this.S(),this}update(){0===this.J&&this.K(),this.X.forEach((t=>t.update())),this.J+=h.V,this.N=this.N.map((([t,A])=>(t-h.V<0&&A(),[t-h.V,A]))).filter((t=>t[0]>0)),this.Z.slice(0).forEach((([t,A])=>{let i=this.Z.filter((A=>A[0].constructor.name===t.constructor.name));if(i.length>A){let t=i[0][0];this.remove(t)}})),this.q(),this.$()}draw(t){this.visible&&(this.tt(t),this.X.forEach((A=>A.draw(t))),this.At(t))}O(){this.it()}S(){}K(){}q(){}$(){}At(t){}tt(t){}it(){}}class a extends e{get data(){return this.W}get info(){let t=s.info.find((t=>t.name===this.st));if(!t)throw`nosprite ${this.st}`;return t}get duration(){return this.data.duration??.4}set duration(t){this.data.duration=t}get tag(){let t=this.info.tags.find((t=>t.name===this.nt));if(!t)throw`notag ${this.st} ${this.nt}`;return t}get st(){return this.data.name}get nt(){return this.data.tag||"idle"}x=0;y=0;ht=1;et=1;Bt(t,A){this.x=t,this.y=A}_current_frame=0;get I(){let{from:t}=this.tag;return this.info.B[this._current_frame+t]}get gt(){return this.data.gt??"c"}get _(){if("tl"===this.gt)return 0;let{l:t}=this.I;return"c"===this.gt||"bc"===this.gt?t/2:0}get Y(){if("tl"===this.gt)return 0;let{o:t}=this.I;return"c"===this.gt?t/2:"bc"===this.gt?t:0}Qt(t){this.data.tag!==t&&(this.data.tag=t,this._current_frame=0,this.rt=0)}rt=0;q(){let{from:t,to:A}=this.tag,{duration:i}=this,s=i/(A-t+1),n=A-t;this.rt+=h.V,this.rt>=s&&(this.rt-=s,this._current_frame===n?!1!==this.data.loop&&(this._current_frame=0):this._current_frame+=1)}At(t){let{x:A,y:i,ht:s,et:n}=this;t.U(this,A,i,s,n)}}const B=function(){let t=new Set;return document.addEventListener("keydown",(A=>{return i=A.key,void t.add(i);var i})),document.addEventListener("keyup",(A=>{return i=A.key,void t.delete(i);var i})),A=>[...t].includes(A)}();var g=function(){var t,A,i,s,n,h=function(t){return Math.sin(6.283184*t)},e=function(t){return.003959503758*2**((t-128)/12)},a=function(t,A,i){var s,n,h,a,g,Q,r=B[t.lt[0]],l=t.lt[1],o=t.lt[3]/32,c=B[t.lt[4]],w=t.lt[5],C=t.lt[8]/32,E=t.lt[9],d=t.lt[10]*t.lt[10]*4,M=t.lt[11]*t.lt[11]*4,u=t.lt[12]*t.lt[12]*4,F=1/u,D=-t.lt[13]/16,G=t.lt[14],U=i*2**(2-t.lt[15]),I=new Int32Array(d+M+u),f=0,x=0;for(s=0,n=0;s<d+M+u;s++,n++)n>=0&&(n-=U,g=e(A+(15&(G=G>>8|(255&G)<<4))+t.lt[2]-128),Q=e(A+(15&G)+t.lt[6]-128)*(1+8e-4*t.lt[7])),h=1,s<d?h=s/d:s>=d+M&&(h=(1-(h=(s-d-M)*F))*3**(D*h)),a=r(f+=g*h**o)*l,a+=c(x+=Q*h**C)*w,E&&(a+=(2*Math.random()-1)*E),I[s]=80*a*h|0;return I},B=[h,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var A=t%1*4;return A<2?A-1:3-A}];this.init=function(h){t=h,A=h.ot,i=0,s=h.ct*h.wt*(A+1)*2,n=new Int32Array(s)},this.Ct=function(){var e,g,Q,r,l,o,c,w,C,E,d,M,u,F,D=new Int32Array(s),G=t.Et[i],U=t.ct,I=t.wt,f=0,x=0,_=!1,Y=[];for(Q=0;Q<=A;++Q)for(c=G.dt[Q],r=0;r<I;++r){var m=c?G.c[c-1].f[r]:0;m&&(G.lt[m-1]=G.c[c-1].f[r+I]||0,m<17&&(Y=[]));var p=B[G.lt[16]],V=G.lt[17]/512,R=2**(G.lt[18]-9)/U,W=G.lt[19],k=G.lt[20],J=43.23529*G.lt[21]*3.141592/44100,X=1-G.lt[22]/255,Z=1e-5*G.lt[23],N=G.lt[24]/32,T=G.lt[25]/512,b=6.283184*2**(G.lt[26]-9)/U,H=G.lt[27]/255,y=G.lt[28]*U&-2;for(d=(Q*I+r)*U,l=0;l<4;++l)if(o=c?G.c[c-1].n[r+l*I]:0){Y[o]||(Y[o]=a(G,o,U));var P=Y[o];for(g=0,e=2*d;g<P.length;g++,e+=2)D[e]+=P[g]}for(g=0;g<U;g++)(E=D[w=2*(d+g)])||_?(M=J,W&&(M*=p(R*w)*V+.5),x+=(M=1.5*Math.sin(M))*(u=X*(E-x)-(f+=M*x)),E=3==k?x:1==k?u:f,Z&&(E=(E*=Z)<1?E>-1?h(.25*E):-1:1,E/=Z),_=(E*=N)*E>1e-5,F=E*(1-(C=Math.sin(b*w)*T+.5)),E*=C):F=0,w>=y&&(F+=D[w-y+1]*H,E+=D[w-y]*H),D[w]=0|F,D[w+1]=0|E,n[w]+=0|F,n[w+1]+=0|E}return++i/t.Mt},this.ut=function(t){for(var A=t.createBuffer(2,s/2,44100),i=0;i<2;i++)for(var h=A.getChannelData(i),e=i;e<s;e+=2)h[e>>1]=n[e]/65536;return A}};const Q={Et:[{lt:[1,130,128,0,1,128,116,9,0,25,6,22,34,0,0,0,0,69,3,0,2,23,167,0,32,77,6,25,6],dt:[1,2,1,2,,,1,2,1,2,1,2,,2,1],c:[{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]},{n:[142,146,137,142,146,137,142,146,137,142,146,137,142,146,137,140,144,135,140,144,135,140,144,135,140,144,135,140,144,135,140,144,154,,,154,,,154,,,154,,,154,,,152,,,152,,,152,,,152,,,152,,,152],f:[]}]},{lt:[0,68,128,0,3,91,128,6,0,0,25,40,101,37,102,0,1,55,8,0,1,53,61,26,27,84,6,144,4],dt:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,139,,,,,,,,135,,,,,,,,139,,,,,,,,151,,,,,,,,144,,,,,,,,139,,,,,,,,144,,,,,,,,142,,,,,,,,141,,,,,,,,142,,,,,,,,141],f:[]},{n:[135,,,,,,,,,,,,135,,,,,,,,,,,,135,,,,,,,,,,,,137,,,,,,,,,,,,139,,,,,,,,,,,,147],f:[]}]},{lt:[2,60,127,28,2,83,138,0,27,0,61,28,65,11,0,0,2,0,0,0,2,118,56,0,91,146,4,0,2],dt:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,,,,,,,,,135],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,147],f:[]}]},{lt:[3,255,116,79,0,255,116,0,83,123,4,6,69,52,0,0,0,184,11,1,2,14,0,0,32,0,0,0,0],dt:[,,,,2,2,2,1,2,2,1,1,,,2,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135,,,,,,135,,,135,,,135,,,,,,135,,,135,,,135],f:[]},{n:[,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141],f:[]}]},{lt:[0,39,117,24,0,51,110,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,1,39,76,5,0,0],dt:[,,,,,,,,,,,,,,,2,2],c:[{n:[],f:[]},{n:[,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151],f:[]}]},{lt:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],dt:[,,,,2,,2,2,2,2,2,2,2,,2],c:[{n:[],f:[]},{n:[135,,,,,,147,,,,,,135,,,,,,147,,,,,,135,,,,,,147],f:[]}]},{lt:[0,51,128,64,0,59,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,2],dt:[,,,,,2,2,2,2,2,,,2,2],c:[{n:[],f:[]},{n:[,147,,,135,,,135,,,135,,,147,,,135,,,135,,,147,,,135,,,135,,,147],f:[]}]},{lt:[1,127,118,0,1,128,128,10,0,0,21,0,59,12,0,0,0,69,3,1,1,23,167,0,32,77,6,25,6],dt:[,,,,2,2,,,2,2,2,2,2],c:[{n:[],f:[]},{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]}]}],ct:6615,wt:32,ot:16,Mt:8},r=t=>({Et:[{lt:[1,109,120,0,0,53,120,4,0,0,15,0,48,15,50,2,1,0,0,0,2,255,96,0,37,24,1,67,1],dt:[1],c:[{n:[t],f:[]}]}],ct:5513,wt:32,ot:0,Mt:1}),l=[r(151),r(161),r(171)],o={Et:[{lt:[3,182,119,63,1,67,129,10,4,0,11,2,138,215,0,0,1,164,12,0,2,94,148,57,32,0,9,0,0],dt:[1],c:[{n:[137],f:[]}]}],ct:5513,wt:32,ot:0,Mt:1},c=t=>({Et:[{lt:[0,100,125,0,0,201,131,2,0,0,5,0,39,0,134,3,0,195,6,0,2,44,60,1,39,0,10,0,0],dt:[1],c:[{n:[t],f:[]}]}],ct:5513,wt:32,ot:0,Mt:1}),w=[c(135),c(147)],C=function(){let t=new AudioContext,A=t.createGain();A.connect(t.destination);const i={},s=[{name:"song",data:Q},{name:"pickup0",data:l[0]},{name:"pickup1",data:l[1]},{name:"pickup2",data:l[2]},{name:"damage",data:o},{name:"jump",data:w[0]},{name:"djump",data:w[1]}];return{Ct:()=>(s.forEach((A=>{let s=new g;s.init(A.data),function n(){if(1===s.Ct()){let n=s.ut(t);((t,A)=>{i[t]=A})(A.name,n)}else setTimeout(n,0)}()})),new Promise((t=>{!function A(){Object.keys(i).length!==s.length?setTimeout(A,100):t()}()}))),play:(s,n=!1,h=.8)=>{const e=i[s];if(!e)return;let a=t.createBufferSource(),B=t.createGain();return a.buffer=e,a.connect(B),B.connect(A),a.loop=n,B.gain.value=h,a.start(),()=>{a.stop()}}}}();function E(t,A,i){return t<A?Math.min(t+i,A):t>A?Math.max(t-i,A):t}function d(t,A){return t.x<A.x+A.w&&t.x+t.w>A.x&&t.y<A.y+A.t&&t.y+t.t>A.y}function M(t){let A;const i=(s,n)=>{A&&A.remove(),A=(new s).k(n),A.g=t,A.go=i,A.init()};i(F),function(t){let A;const i=s=>{h.V=Math.min(20,Math.max(16,A?s-A:16))/1e3,A=s,h.time+=h.V,t(),requestAnimationFrame(i)};requestAnimationFrame(i)}((()=>{A.update(),t.clear(),t.fr(0,0,64,64,"hsl(20, 5%, 50%)"),t.fr(1,1,62,62,"hsl(70, 15%, 30%)"),A.draw(t)}))}class u extends e{Ft=!1;Dt;g;go;update(){B("m")?this.Ft||(this.Ft=!0,this.Dt?(this.Dt(),this.Dt=void 0):this.Dt=C.play("song",!0)):this.Ft=!1,super.update()}O(){super.O(),this.Dt?.()}}class F extends u{S(){s.load().then((()=>{let t=this.j(a,{name:"loading",tag:"audio",duration:1});t.x=32,t.y=32,C.Ct().then((()=>{this.go(G,{level:1})}))}))}}class D extends u{S(){let t=this.j(a,{name:"end"});t.x=32,t.y=32}q(){this.J>4&&B("x")&&this.go(G,{level:1})}}class G extends u{get data(){return this.W}Gt;Ut;S(){this.Dt=C.play("song",!0,.1),this.Gt=this.j(b,{level:this.data.level}),this.Ut=this.j(U)}q(){this.Gt.P(k)&&B("x")&&this.go(G,{level:this.data.level}),(this.Ut.P(I)?.J??0)>4&&(3===this.data.level?this.go(D):this.go(G,{level:this.data.level+1}))}}class U extends e{width=0;It=0;ft;xt;_t(){this.It>0&&this.width++,this.It=.9,C.play("pickup"+Math.floor(3*Math.random()))}get done(){return this.width===this.Yt}S(){let t=this.j(a,{name:"collect",tag:"coin"});t.x=3,t.y=3}q(){if(this.It>0&&(this.It=E(this.It,0,3*h.V),this.It<.5&&(this.width++,this.It=0)),this.ft&&this.ft>0&&(this.ft=E(this.ft,0,3*h.V),0===this.ft)){this.ft=void 0;let t=this.j(a,{name:"restart",tag:"bg",duration:.8});t.x=32,t.y=32,this.xt=this.j(a,{name:"restart",duration:5}),this.xt.x=32,this.xt.y=32}this.xt&&(this.xt.y=32+4*Math.sin(8*this.J))}Yt=0;At(t){t.fr(6,1,this.Yt,1,"#f7ffff"),t.fr(6,2,this.width,2,"#b4d800");let A=this.It/.9*1;t.fr(6+this.width,2,A,2,"#f59562")}}class I extends e{S(){let t=this.j(a,{name:"victory",duration:1});t.x=32,t.y=20}}class f extends e{get Vt(){return{x:this.x,y:this.y,w:this.w/2,t:this.t/2}}U;Rt=!0;Wt=1;kt=.8;w=4;t=4;grid;dx=0;dy=0;x=0;y=0;Jt=0;Xt=0;Zt=this.Nt;Tt;bt;get Ht(){return Math.sign(this.dx)}get yt(){return this.Jt<0}get Nt(){return this.Jt>0}get Pt(){return this.Xt<0}get vt(){return this.Xt>0}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}update(){super.update(),this.Zt=this.Nt}}class x extends f{Wt=0;get data(){return this.W}get duration(){return this.data.duration??1}S(){this.U=this.j(a,{name:this.data.name,tag:this.data.tag})}q(){this.J>this.duration&&this.remove()}}class _ extends x{S(){this.U=this.j(a,{name:"confetti"})}q(){this.y-=(1*Math.sin(3*this.J)+12)*h.V}At(t){t.G(this.x+3*Math.sin(4*this.J),this.y),this.U.At(t),t.pop()}}class Y extends x{Wt=.3;S(){this.U=this.j(a,{name:"crash"})}}class m extends f{jt}class p extends m{Wt=0;kt=64;Lt;Ot;St;S(){this.U=this.j(a,{name:"collect",tag:"coin",duration:.8})}q(){if(void 0!==this.Lt&&(this.Lt=E(this.Lt,0,h.V),this.Lt<2&&(h.R(.3)?this.visible&&(this.visible=!1):h.R(.1)&&(this.visible||(this.visible=!0))),0===this.Lt&&(this.parent.Kt(),this.remove())),void 0!==this.jt){if(this.jt=E(this.jt,0,h.V),this.U.duration=.16,0===this.jt){let t=this.parent.j(x,{name:"fx_collect",duration:.3});t.x=this.x,t.y=this.y,this.parent.zt(this),this.remove()}}else this.dy=Math.sin(3*this.J)}}class V extends f{}class R extends V{w=8;t=8;S(){this.U=this.j(a,{name:"crawler"}),this.dx=1.2}q(){this.U.ht=this.Ht}}class W extends f{Wt=0;S(){this.U=this.j(a,{name:"flies",duration:1})}}class k extends f{Wt=0;Rt=!1;S(){this.j(a,{name:"main_char",tag:"die",loop:!1})}}class J extends f{S(){this.j(a,{name:"main_char",tag:"victory"})}}class X extends f{w=8;t=8;qt=0;$t=0;tA=2;AA=0;iA;sA=!1;nA=!1;S(){this.U=this.j(a,{name:"main_char"})}q(){if(this.qt>0)return void(this.qt=E(this.qt,0,h.V));let t=B("x"),A=B("ArrowLeft")||B("a"),i=B("ArrowRight")||B("d"),s=B("ArrowUp")||B("w");if(this.sA=A,this.nA=i,this.dx=A?-8:i?8:0,s?void 0!==this.AA&&(this.AA+=h.V):void 0===this.AA?this.AA=0:this.AA>0&&(this.AA=-.3),void 0!==this.AA&&this.AA<0&&(this.AA+=h.V,this.AA>=0&&(this.AA=void 0)),void 0!==this.AA&&this.AA>0)if(void 0!==this.iA)this.dy=-40,this.AA=void 0,this.tA=1,C.play("jump");else if(this.tA>0){this.dy=-40,this.AA=void 0,this.tA=0,C.play("djump");let t=this.parent.j(x,{name:"fx_djump",duration:.4});t.x=this.x,t.y=this.y+5}if(this.Nt?this.iA=0:this.Zt&&(this.iA=.16),void 0!==this.iA&&this.iA>0&&(this.iA=E(this.iA,0,h.V),0===this.iA&&(this.iA=void 0)),this.Nt?0!==this.dx?(this.U.Qt("run"),this.U.ht=this.Ht):this.U.Qt("idle"):(this.U.Qt("jump"),0!==this.Ht&&(this.U.ht=this.Ht)),t&&0===this.$t){let t=this.parent.L(N,{dx:this.dx,dy:10});t.x=this.x,t.y=this.y,this.dx*=-6,this.$t=.2}this.$t=E(this.$t,0,h.V)}$(){}}class Z extends e{w=4;t=4;x;y;dx;dy;q(){this.dy=Math.sin(8*this.J)*Math.sin(16*this.J)*20,this.J>1.5&&this.remove()}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}}class N extends Z{get data(){return this.W}S(){this.dx=2*this.data.dx,this.dy=this.data.dy,this.j(a,{name:"bullet"})}}class T extends f{static hA=[];Wt=0;S(){0===T.hA.length&&(T.hA=["run","jump","djump","shoot"]);let t=T.hA.shift();console.log(t),this.U=this.j(a,{name:"info",tag:t})}}class b extends e{eA=[];zt(t){t.Ot&&this.eA.push([t.Ot,t.St])}Kt(){let t=this.eA.pop();if(t){let A=this.j(p);A.x=t[0],A.y=t[1],A.Ot=t[0],A.St=t[1]}}get data(){return this.W}get Ut(){return this.parent.P(U)}h;aA=0;BA=0;gA=this.aA;QA=this.BA;get rA(){return 4*this.h[0].length}lA(t,A,i){return!!this.oA(t,A,i)}oA(t,A,i){let{x:s,y:n,w:h,t:e}=t;return this.cA(s-h/2+A,n-e/2+i,h,e)}cA(t,A,i=1,s=1){let n=this.h[0].length,h=this.h.length,e=t/4,a=A/4,B=(t+i-1)/4,g=(A+s-1)/4;if(e<0||B>=n||a<0||g>=h)return!0;for(t=e;t<=B;t++)for(A=a;A<=g;A++)if(t=Math.floor(t),A=Math.floor(A),y(this.h[A][t]))return[4*t,4*A]}S(){let t=s.i[this.data.level-1];this.h=[];for(let i=0;i<t.t;i++)this.h[i]=Array(t.w);let A=0;for(let i=0;i<t.A.length;i++){let{px:s,src:n}=t.A[i],h=s[0]/4,e=s[1]/4,a=n[1]/4*20+n[0]/4;if(399===a){let t=this.j(X);t.x=s[0],t.y=s[1];let A=this.j(W);A.x=s[0],A.y=s[1]-8}else if(398===a){let t=this.j(R);t.x=s[0],t.y=s[1]}else if(397===a){let t=this.j(p);t.x=s[0],t.y=s[1],t.Ot=s[0],t.St=s[1],A++}else if(396===a){let t=this.j(T);t.x=s[0],t.y=s[1]}else this.h[e][h]=a}this.wA=A}wA=0;K(){this.Ut.Yt=this.wA}q(){let t=this.P(X);if(t&&this.Ut.done){let A=this.j(J);A.x=t.x,A.y=t.y,t.remove(),this.P(W)?.remove(),this.Ut.j(I)}if(this.H(R).forEach((t=>{!this.lA(t,Math.sign(t.dx),0)&&this.lA(t,4*Math.sign(t.dx),1)||(t.dx*=-1)})),t&&0===t.qt){this.X.filter((t=>t instanceof m)).forEach((A=>{void 0===A.jt&&d(A,t)&&(A.jt=.3,A.dy=-8,this.Ut?._t())})),this.X.filter((t=>t instanceof V)).forEach((A=>{if(d(A.Vt,t.Vt)){if(0===this.Ut.width){t.remove();let A=this.j(k);A.x=t.x,A.y=t.y,this.Ut.ft=2}t.j(x,{name:"fx_flash"}),C.play("damage"),t.qt=.6,t.dy=-32,0===t.dx?t.dx=6.4:t.dx=8*-Math.sign(t.dx)*.8;for(let A=0;A<this.Ut.width;A++){let i=this.j(p);i.x=t.x,i.y=t.y,i.dx=8*Math.sin(A/this.Ut.width*Math.PI*2),i.dy=80*Math.cos(A/this.Ut.width*Math.PI*2),i.Lt=5}this.Ut.width=0}}))}if(t&&void 0===t.Tt){let A=this.lA(t,0,2),i=this.oA(t,1,-1)?void 0:this.oA(t,1,0),s=this.oA(t,-1,-1)?void 0:this.oA(t,-1,0);A||(t.nA&&Array.isArray(i)?(t.Tt=.2,t.x=i[0],t.y=i[1]):t.sA&&Array.isArray(s)&&(t.Tt=-.2,t.x=s[0]+4,t.y=s[1]))}if(t&&!t.Tt&&void 0===t.bt){let A=this.oA(t,1,-4)?void 0:this.oA(t,1,0),i=this.oA(t,-1,-4)?void 0:this.oA(t,-1,0);t.nA&&Array.isArray(A)?(t.bt=.16,t.x=A[0],t.y=A[1]-1):t.sA&&Array.isArray(i)&&(t.bt=-.16,t.x=i[0]+4,t.y=i[1]-1)}this.X.filter((t=>t instanceof f)).forEach((t=>{let A=this.oA(t,0,0);if(void 0!==t.Tt)return t.Tt=E(t.Tt,0,h.V),void(0===t.Tt&&(t.Tt=void 0,t.y=A[1]-4,t.dy=0));if(void 0!==t.bt)return t.bt=E(t.bt,0,h.V),void(0===t.bt&&(t.bt=void 0,t.y=A[1]-4,t.dy=0));let i=4*t.Wt,s=0;{let A=Math.abs(t.dy),n=Math.sign(t.dy);for(let e=0;e<A;e+=1){let a=.5*n*Math.sqrt(h.V);if(this.lA(t,0,a)){t.Jt=n,t.dy/=2,s=0;break}t.Jt=0,t.y+=a,s=1-n*(e/A);{let A=t.kt*i*Math.sqrt(s),n=1;t.dy+=n*A*h.V}}}{let A=3*i,s=1;for(let i=0;i<A;i+=1){let A=.5*s*Math.sqrt(h.V);if(this.lA(t,0,A)){t.Jt=s,t.dy=0;break}t.Jt=0,t.y+=A}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.V)*s;if(this.lA(t,A,0)){t.Xt=i,t.dx=0;break}t.Xt=0,t.x+=A}}}));let A=this.P(J);if(A&&h.R(.6))for(let h=0;h<4;h++){let t=this.j(_);t.x=h/3*64+3*Math.sin(6*this.J),t.y=64}let i=t||A;if(i&&(this.gA<i.x-4-1&&(this.gA=i.x-4-1),this.gA>i.x+4+1&&(this.gA=i.x+4+1),this.QA<i.y-8&&(this.QA=i.y-8),this.QA>i.y+8&&(this.QA=i.y+8)),i){let t=i.dx<0?-50:i.dx>0?-10:-32;this.aA=E(this.aA,this.gA+t,50*h.V),this.BA=this.QA-32,this.aA=Math.min(Math.max(0,this.aA),this.rA)}this.P(k)&&(this.aA=E(this.aA,this.aA+8*Math.sin(9*this.J),8*h.V),this.BA=E(this.BA,this.BA+8*Math.cos(9*this.J),8*h.V)),this.X.filter((t=>t instanceof Z)).forEach((t=>{{let A=Math.abs(t.dy),i=Math.sign(t.dy);for(let s=0;s<A;s+=1){let A=.5*i*Math.sqrt(h.V);if(this.lA(t,0,A)){t.dy/=2;break}t.y+=A;{let A=1,i=1;t.dy+=i*A*h.V}}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.V)*s;if(this.lA(t,A,0)){t.dx=0;let A=this.L(Y);A.x=t.x-2*i,A.y=t.y,A.U.ht=i,this.remove(t);break}t.x+=A}}}));let s=this.P(W);s&&t&&(s.x=E(s.x,t.x+4*Math.cos(8*t.J),30*h.V),s.y=E(s.y,t.y-8+8*Math.sin(8*t.J),26*h.V),Math.abs(s.x-t.x)+Math.abs(s.y-t.y)<=16?s.U.Qt("idle"):s.U.Qt("run"),s.U.ht=t.U.ht);let n="none";if(t&&t.Nt&&0!==t.dx&&h.R(.3+.5*Math.random())&&(n="idle"),t&&!t?.Zt&&t.Nt&&(n="jump"),t&&"none"!==n){let A=this.j(x,{name:"fx_dust",tag:n,duration:.4});A.x=t.x,"idle"===n&&(A.x+=4*-Math.sign(t.dx)),A.y=t.y,A.U.ht=Math.max(1,Math.sign(t.dx))}}tt(t){t.G(-this.aA,-this.BA);for(let A=0;A<this.h.length;A++){let i=this.h[A];for(let s=0;s<i.length;s++){let n=i[s];t.p(n,4*s,4*A)}}}At(t){t.pop()}}const H=[0,1,2,3,4,5,20,21,22,23,24,40,41,42,44,60,61,62,63,64,80,81,82,83],y=t=>H.includes(t);!function(t){let A=function(t,A,i=!0){let s=document.createElement("canvas");i&&s.classList.add("pixelated");let h=s.getContext("2d");const e=()=>{s.width=t,s.height=A,h.imageSmoothingEnabled=i};return document.addEventListener("scroll",e,{capture:!0,passive:!0}),window.addEventListener("resize",e,{passive:!0}),e(),new n(s,h)}(64,64,!0);t.appendChild(A.canvas),M(A)}(document.getElementById("app"));
