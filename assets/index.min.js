const t=""+new URL("out_0-Duc6sHNm.png",import.meta.url).href,i=[{n:"Level_0",w:112,t:27,i:"AQR9AVQsVSxPMFAwUTBSMFMwVDBVME80UDRRNFI0UzRUNFU0UThSOFM4VDhVOGg8aTxqPGs8bDxtPG48bzxoQGlAakBrQGxAbUBuQG9AOEQ5RDpEO0Q8RD1EPkQ/REBEQURoRGlEakRrRGxEbURuRG9EOEg5SDpIO0g8SD1IPkg/SEBIQUhoSGlIakhrSGxIbUhuSG9IOEw5TEBMQUxnTGhMaUxqTGtMbExtTG5Mb0w4UEFQZVBmUGdQaFBpUGpQa1BsUG1QblBvUBdUGFQZVBpUG1QcVB1UHlQfVCBUKVQqVCtULFQtVC5UL1QwVFJUY1RkVGVUZlRnVGhUaVRqVGtUbFRtVG5Ub1QVWBZYF1gYWBlYGlgbWBxYHVgeWB9YIFgpWCpYK1gsWC1YLlgvWDBYT1hQWFFYUlhTWFRYVVhWWFdYWFhZWFpYW1hcWF1YXlhfWGBYYVhiWGNYZFhlWGZYZ1hoWGlYalhrWGxYbVhuWG9YAFwBXAJcA1wEXAVcBlwHXAhcCVwKXAtcDFwNXA5cD1wQXBFcElwTXBRcFVwWXBdcGFwZXBpcG1wcXB1cHlwfXCBcKVwqXCtcLFwtXC5cL1wwXE9cUFxRXFJcU1xUXFVcVlxXXFhcWVxaXFtcXFxdXF5cX1xgXGFcYlxjXGRcZVxmXGdcaFxpXGpca1xsXG1cblxvXABgAWACYANgBGAFYAZgB2AIYAlgCmALYAxgDWAOYA9gEGARYBJgE2AUYBVgFmAXYBhgGWAaYBtgHGAdYB5gH2AgYClgKmArYCxgLWAuYC9gMGAAZAFkAmQDZARkBWQGZAdkCGQJZApkC2QMZA1kDmQPZBBkEWQSZBNkFGQVZBZkF2QYZBlkGmQbZBxkHWQeZB9kIGQpZCpkK2QsZC1kLmQvZDBkAGgBaAJoA2gEaAVoBmgHaAhoCWgKaAtoDGgNaA5oD2gQaBFoEmgTaBRoFWgWaBdoGGgZaBpoG2gcaB1oHmgfaCBoKWgqaCtoLGgtaC5oL2gwaAAQBQBQODxMP0xAUEFUARAFAEJEOkw9TDlQOFQBDAMAaDhTVABYAAwLAFMsPEA+QEBAZ0hmTGRQFlRRVGJUFFgABBkATjBnME40ZzRnOGc8Z0A3RGdEN0g3TDdQPFAoVDdUPFQoWDxYTlgoXDxcTlwoYChkKGgBCDUATzhRPFI8UzxUPFU8BkAHQAhACUAKQAtADEBDRERERURGREdEO0w+TE9gUGBRYFJgU2BUYFVgVmBXYFhgWWBaYFtgXGBdYF5gX2BgYGFgYmBjYGRgZWBmYGdgaGBpYGpga2BsYG1gbmBvYAIEJgAAKAAsViwAMFYwaDAANFY0aDQAOFY4ADwAQABEAEhCSABMQkwAUD1QQlAAVCFUMVQ9VEJUIVgxWD1YIVwxXD1cIWAxYCFkMWQhaDFoAQBaAFQoVShPLFAsUSxSLGk4ajhrOGw4bThuOG84BjwHPAg8CTwKPAs8DDw4QDlAOkA7QD1AP0BBQEJAQ0BEQEVARkBHQGVMF1AYUBlQGlAbUBxQHVAeUB9QIFApUCpQK1AsUC1QLlAvUDBQUlBjUBVUT1RQVFRUVVRWVFdUWFRZVFpUW1RcVF1UXlRfVGBUYVQBWAJYA1gEWAVYBlgHWAhYCVgKWAtYDFgNWA5YD1gQWBFYElgTWAAICQBOOFA8BUA/UEBUN1hBWDxgTmACCAgAVjwNQEhEOlA5VDhYQlg9YAIACAAAJFYoaCwNPEhAIVAxUFNQAAANAFMoTixnLAU8N0BmSGRMFlAoUFFQYlAUVE5UBAgEAEA0QDg+PEA8BAQDAEAwPjg8PBNMAQAQVBFMHwBNCFEISxBPEFMQWxRfFGMUChgNGE0YURgIHA8cMSBPIFwgYiAGJDYkEChfKAYsEzAkMAY0MTRCNEc0ITgnOA=="},{n:"Level_1",w:73,t:37,i:"AQSJAB8wIDBIXEhgR2RIZAdsCGwJbApsC2wMbBVsFmwdbCRsJWwrbAdwCHAJcApwC3AMcBVwFnAdcCRwJXArcAd0CHQJdAp0C3QMdBV0FnQddCR0JXQrdDeAEYgSiBOIFIgViBaIF4gYiBmIGogbiByIHYgkiCWIJogniCiIKYgqiCuILIgtiC6IL4gwiDGIMogziBGMEowTjBSMFYwWjBeMGIwZjBqMG4wcjB2MJIwljCaMJ4wojCmMKowrjCyMLYwujC+MMIwxjDKMM4wDkBGQEpATkBSQFZAWkBeQGJAZkBqQG5AckB2QHpAfkCCQIZAikCOQJJAlkCaQJ5AokCmQKpArkCyQLZAukC+QMJAxkDKQM5ABEAQAADAlRABUQ2gBDAYAAFAAfBGEHowAkASQAAwOAEdgRmRCaAZsQGw+cDx0Ong4fDaANIQjjAKQEJAABBgAHjA7SEdcFGwcbCNsKmwGcBRwHHAjcCpwBnQUdBx0I3QqdBB4EHwQgBCEEIgjiBCMAQgyAAEwAjADMAQwBTAOMA8wEDARMBIwEzAUMBUwFjAfNCA0O0xCUENQAVQCVANUBFQFVERoRWhGaEdoSGhBbEJsP3A9dAd4CHgJeAp4C3gMeBV4FngdeCR4JXgreDt4OXw1hDaEN4QCBC0AITAANAA4ADwAQABEAEg8SABMAFgAXABgAGQAaABsDWwXbB5sJmwsbABwDXAXcB5wJnAscAB0DXQXdB50JnQsdAB4EXgRfACAEYA4gACEAIgeiDSIAIw0jDSQAQBdAAAsASwCLAMsBCwFLA4sDywQLBEsEiwTLBQsFSwWLB8sICwlQEJMQ0wBUAJQA1AEUAVQSFhDZERkRWQHaAhoCWgKaAtoDGgVaBZoHWgkaCVoK2hBaD9sPXA7dDl4N3w1gBKEE4QUhBWEFoQXhBiEGYQahBuEHIQdhCSEJYQmhCeEKIQphCqEK4QshC2ELoQvhDCEMYQyhDOEA4wfjCCMIYwijAGQBZAGkAeQCJAJkAqQC5AMkA2QDpAPkAAICQANMB40JERBUAZ4FHgceCN4KngCCBIABjAXMCE0JkQ8TERQBlRDbEBwPnQNeBd4HngmeCx4PHg6fDiEAgAPAAYsFywhLCZAPERETAZQDWgXaB5oJmgsaBF0HoQEjAAAFwANLB4sJEA7REFMR1hGYEJkBmgUaBxoI2gqaEBoPmw8cBB0OnQ4eDZ8NIAjhAKMBAwCACEcJUgEAB8AIhgjGCsYLBg0GDUYPRg+GD8YKkwrTCxMLUwuTC9MMEwxTDJMM0w0TDVMNkw3TDhMOUw6TDBoMWgyaAVsAXwFAAYAJBgtGDYYQBgzaAJ8AwAGACoYMxg8GClML2gEbAIMAQAhGBNMAQAKZBFMIAAnDDAMOQxEEAIgBiALIA8gFCAYIBwgRCAgJDwwRDA6NAI4BTg+OEI8RDwCRAVEQkRERBVYKGAZcCBwKHAfgCKA"},{n:"Level_2",w:40,t:103,i:"AQgOAAUwBjAHMAgwCTAKMAswDDANMA4wDzAQMBEwEjABAA4ABSwGLAcsCCwJLAosCywMLA0sDiwPLBAsESwSLAAIAQAEMAIIAQATMAIAAQATLAAAAQAELBNMAQAJKBFMAQARIA=="}];function s(t){function i(t){function i(t){return[4*(t%1024),4*Math.floor(t/1024)]}let s=[],n=function(t){const i=atob(t),s=i.length,n=new Uint8Array(s);for(let h=0;h<s;h++)n[h]=i.charCodeAt(h);return new Uint16Array(n.buffer)}(t);for(let h=0;h<n.length;){let t=n[h];h++;let e=n[h];h++;let a=[...n.slice(h,h+e)];h+=e,s.push(...a.map((s=>({src:i(t),px:i(s)}))))}return s}return t.map((t=>{let{n:s,w:n,t:h,i:e}=t;return{name:s,w:n,t:h,i:i(e)}}))}const n=new class{image;info;h;A;async load(){var n;this.image=await(n=t,new Promise((t=>{let i=new Image;i.onload=()=>t(i),i.src=n}))),this.info="bullet\n\n0*0*idle\n\n0*80*236\n\n\ncollect\n\n0*2*coin\n\n0*88*236\n0*96*236\n0*104*236\n\n\nconfetti\n\n0*3*idle\n\n0*112*236\n0*120*236\n0*128*236\n0*136*236\n\n\ncrash\n\n0*2*idle\n\n0*144*236\n0*152*236\n0*160*236\n\n\ncrawler\n\n0*1*idle\n\n0*168*236\n0*176*236\n\n\nend\n\n0*4*idle\n\n2*0*0\n2*80*0\n2*160*0\n2*0*80\n2*80*80\n\n\nflies\n\n0*7*idle\n8*13*run\n\n1*160*190\n1*176*190\n1*192*190\n1*208*190\n1*224*190\n1*240*190\n1*240*160\n1*240*80\n1*240*96\n1*240*112\n1*240*128\n1*240*144\n1*240*0\n1*240*16\n\n\nfx_collect\n\n0*2*idle\n\n0*184*236\n0*192*236\n0*200*236\n\n\nfx_djump\n\n0*1*idle\n\n0*208*236\n0*216*236\n\n\nfx_dust\n\n0*4*idle\n5*7*jump\n\n0*224*236\n0*232*236\n0*240*236\n0*248*236\n0*80*244\n0*88*244\n0*96*244\n0*104*244\n\n\nfx_flash\n\n0*1*idle\n\n0*112*244\n0*120*244\n\n\nloading\n\n0*1*audio\n2*4*input\n\n4*0*160\n4*80*160\n4*160*160\n4*0*190\n4*80*190\n\n\nmain_char\n\n0*2*idle\n3*6*victory\n7*12*run\n13*17*jump\n18*20*die\n\n0*128*244\n0*136*244\n0*144*244\n0*152*244\n0*160*244\n0*168*244\n0*176*244\n0*184*244\n0*192*244\n0*200*244\n0*208*244\n0*216*244\n0*224*244\n0*232*244\n0*240*244\n0*248*244\n0*160*206\n0*168*206\n0*176*206\n0*184*206\n0*192*206\n\n\nnpc\n\n0*0*idle\n\n3*0*220\n\n\nrestart\n\n0*2*idle\n3*6*bg\n\n1*48*220\n1*64*220\n1*80*220\n1*96*220\n1*112*220\n1*128*220\n1*144*220\n\n\ntest\n\n0*2*idle\n3*4*attack\n\n1*160*220\n1*176*220\n1*192*220\n1*208*220\n1*224*220\n\n\ntiles\n\n0*0*idle\n\n2*160*80\n\n\nvictory\n\n0*8*idle\n\n1*240*220\n1*240*32\n1*240*48\n1*240*64\n1*0*236\n1*16*236\n1*32*236\n1*48*236\n1*64*236".split(/\r?\n\r?\n\r?\n/).map((t=>{let[i,s,n]=t.split(/\r?\n\r?\n/);return{name:i,tags:s.split(/\r?\n/).map((t=>{let[i,s,n]=t.split("*");return{from:parseInt(i),to:parseInt(s),name:n}})),l:n.split(/\r?\n/).map((t=>{let[i,s,n,h,e,a,A,r]=function(t){let[i,s,n]=t,h=0,e=0,[a,A]=0===i?[8,8]:1===i?[16,16]:2===i?[80,80]:4===i?[80,30]:[0,0],[r,l]=[a,A];return[h,e,a,A,s,n,r,l]}(t.split("*").map((t=>parseInt(t))));return{fx:i,fy:s,o:n,u:h,B:e,M:a,_:A,p:r}}))}})),this.A=this.info.find((t=>"tiles"===t.name)).l[0],this.h=s(i)}};class h{constructor(t,i){this.canvas=t,this.m=i}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){let{m:t}=this;t.clearRect(0,0,this.width,this.height)}fr(t,i,s,n,h){let{m:e}=this;e.fillStyle=h,e.fillRect(t,i,s,n)}C(t,i){let{m:s}=this;s.save(),s.translate(Math.floor(t),Math.floor(i))}pop(){let{m:t}=this;t.restore()}F(t,i,s,n=1,h=1){let{fx:e,fy:a,B:A,M:r,_:l,p:o}=t.G,{D:d,Y:c}=t,g=i-e-d,u=s-a-c;this.U(g,u,A,r,l,o,n,h)}V(t,i,s){let{fx:h,fy:e,B:a,M:A}=n.A,r=i-h,l=s-e,o=t%20*4,d=4*Math.floor(t/20);this.U(r,l,a+o,A+d,4,4)}U(t,i,s,h,e,a,A=1,r=1){let{m:l}=this,{image:o}=n;l.save();let d=e,c=a,g=d*Math.abs(A),u=c*Math.abs(r);l.scale(Number(A.toFixed(2)),Number(r.toFixed(2))),A<0&&(t*=-1,t-=g),r<0&&(i*=-1,i-=u),l.drawImage(o,s,h,d,c,Math.round(t),Math.round(i),Math.round(g),Math.round(u)),l.restore()}}const e={R:16,time:0,I(t,i=0){let{R:s,time:n}=this;return Math.floor((n-i-s)/t)<Math.floor((n-i)/t)}};class a{k;v(t){return this.k=t,this}visible=!0;parent;W;J;X;L;Z(t,i){this.L.push([t,i])}constructor(){this.X=[],this.J=[],this.L=[]}T(t){return this.J.filter((i=>i instanceof t))}j(t){return this.J.find((i=>i instanceof t))}N(t,i){let s=(new t).v(i).init();return s.parent=this,s}P(t,i={}){let s=this.N(t,i);return this.J.push(s),s}H(t,i={},s=7){let n=this.N(t,i);return this.J.push(n),this.X.push([n,s]),n}remove(t){if(!t)return void(this.parent?this.parent.remove(this):this.K());let i=this.J.indexOf(t);if(-1===i)throw"noscene rm";this.J.splice(i,1),i=this.X.findIndex((([i])=>i===t)),-1!==i&&this.X.splice(i,1),t.K()}init(){return this.W=0,this.O(),this}update(){0===this.W&&this.S(),this.J.forEach((t=>t.update())),this.W+=e.R,this.L=this.L.map((([t,i])=>(t-e.R<0&&i(),[t-e.R,i]))).filter((t=>t[0]>0)),this.X.slice(0).forEach((([t,i])=>{let s=this.X.filter((i=>i[0].constructor.name===t.constructor.name));if(s.length>i){let t=s[0][0];this.remove(t)}})),this.q(),this.$()}draw(t){this.visible&&(this.tt(t),this.J.forEach((i=>i.draw(t))),this.it(t))}K(){this.st()}O(){}S(){}q(){}$(){}it(t){}tt(t){}st(){}}class A extends a{get data(){return this.k}get info(){let t=n.info.find((t=>t.name===this.nt));if(!t)throw`nosprite ${this.nt}`;return t}get duration(){return this.data.duration??.4}set duration(t){this.data.duration=t}get tag(){let t=this.info.tags.find((t=>t.name===this.ht));if(!t)throw`notag ${this.nt} ${this.ht}`;return t}get nt(){return this.data.name}get ht(){return this.data.tag||"idle"}x=0;y=0;et=1;At=1;rt(t,i){this.x=t,this.y=i}_current_frame=0;get G(){let{from:t}=this.tag;return this.info.l[this._current_frame+t]}get lt(){return this.data.lt??"c"}get D(){if("tl"===this.lt)return 0;let{o:t}=this.G;return"c"===this.lt||"bc"===this.lt?t/2:0}get Y(){if("tl"===this.lt)return 0;let{u:t}=this.G;return"c"===this.lt?t/2:"bc"===this.lt?t:0}ot(t){this.data.tag!==t&&(this.data.tag=t,this._current_frame=0,this.dt=0)}dt=0;q(){let{from:t,to:i}=this.tag,{duration:s}=this,n=s/(i-t+1),h=i-t;this.dt+=e.R,this.dt>=n&&(this.dt-=n,this._current_frame===h?!1!==this.data.loop&&(this._current_frame=0):this._current_frame+=1)}it(t){let{x:i,y:s,et:n,At:h}=this;t.F(this,i,s,n,h)}}const r=function(){let t=new Set;return document.addEventListener("keydown",(i=>{return s=i.key,void t.add(s);var s})),document.addEventListener("keyup",(i=>{return s=i.key,void t.delete(s);var s})),i=>[...t].includes(i)}();var l=function(){var t,i,s,n,h,e=function(t){return Math.sin(6.283184*t)},a=function(t){return.003959503758*2**((t-128)/12)},A=function(t,i,s){var n,h,e,A,l,o,d=r[t.ct[0]],c=t.ct[1],g=t.ct[3]/32,u=r[t.ct[4]],B=t.ct[5],w=t.ct[8]/32,f=t.ct[9],Q=t.ct[10]*t.ct[10]*4,M=t.ct[11]*t.ct[11]*4,_=t.ct[12]*t.ct[12]*4,p=1/_,E=-t.ct[13]/16,m=t.ct[14],x=s*2**(2-t.ct[15]),C=new Int32Array(Q+M+_),F=0,G=0;for(n=0,h=0;n<Q+M+_;n++,h++)h>=0&&(h-=x,l=a(i+(15&(m=m>>8|(255&m)<<4))+t.ct[2]-128),o=a(i+(15&m)+t.ct[6]-128)*(1+8e-4*t.ct[7])),e=1,n<Q?e=n/Q:n>=Q+M&&(e=(1-(e=(n-Q-M)*p))*3**(E*e)),A=d(F+=l*e**g)*c,A+=u(G+=o*e**w)*B,f&&(A+=(2*Math.random()-1)*f),C[n]=80*A*e|0;return C},r=[e,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var i=t%1*4;return i<2?i-1:3-i}];this.init=function(e){t=e,i=e.gt,s=0,n=e.ut*e.Bt*(i+1)*2,h=new Int32Array(n)},this.wt=function(){var a,l,o,d,c,g,u,B,w,f,Q,M,_,p,E=new Int32Array(n),m=t.ft[s],x=t.ut,C=t.Bt,F=0,G=0,D=!1,Y=[];for(o=0;o<=i;++o)for(u=m.Qt[o],d=0;d<C;++d){var U=u?m.c[u-1].f[d]:0;U&&(m.ct[U-1]=m.c[u-1].f[d+C]||0,U<17&&(Y=[]));var V=r[m.ct[16]],R=m.ct[17]/512,I=2**(m.ct[18]-9)/x,k=m.ct[19],v=m.ct[20],W=43.23529*m.ct[21]*3.141592/44100,y=1-m.ct[22]/255,J=1e-5*m.ct[23],b=m.ct[24]/32,X=m.ct[25]/512,L=6.283184*2**(m.ct[26]-9)/x,Z=m.ct[27]/255,T=m.ct[28]*x&-2;for(Q=(o*C+d)*x,c=0;c<4;++c)if(g=u?m.c[u-1].n[d+c*C]:0){Y[g]||(Y[g]=A(m,g,x));var j=Y[g];for(l=0,a=2*Q;l<j.length;l++,a+=2)E[a]+=j[l]}for(l=0;l<x;l++)(f=E[B=2*(Q+l)])||D?(M=W,k&&(M*=V(I*B)*R+.5),G+=(M=1.5*Math.sin(M))*(_=y*(f-G)-(F+=M*G)),f=3==v?G:1==v?_:F,J&&(f=(f*=J)<1?f>-1?e(.25*f):-1:1,f/=J),D=(f*=b)*f>1e-5,p=f*(1-(w=Math.sin(L*B)*X+.5)),f*=w):p=0,B>=T&&(p+=E[B-T+1]*Z,f+=E[B-T]*Z),E[B]=0|p,E[B+1]=0|f,h[B]+=0|p,h[B+1]+=0|f}return++s/t.Mt},this._t=function(t){for(var i=t.createBuffer(2,n/2,44100),s=0;s<2;s++)for(var e=i.getChannelData(s),a=s;a<n;a+=2)e[a>>1]=h[a]/65536;return i}};const o={ft:[{ct:[1,130,128,0,1,128,116,9,0,25,6,22,34,0,0,0,0,69,3,0,2,23,167,0,32,77,6,25,6],Qt:[1,2,1,2,,,1,2,1,2,1,2,,2,1],c:[{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]},{n:[142,146,137,142,146,137,142,146,137,142,146,137,142,146,137,140,144,135,140,144,135,140,144,135,140,144,135,140,144,135,140,144,154,,,154,,,154,,,154,,,154,,,152,,,152,,,152,,,152,,,152,,,152],f:[]}]},{ct:[0,68,128,0,3,91,128,6,0,0,25,40,101,37,102,0,1,55,8,0,1,53,61,26,27,84,6,144,4],Qt:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,139,,,,,,,,135,,,,,,,,139,,,,,,,,151,,,,,,,,144,,,,,,,,139,,,,,,,,144,,,,,,,,142,,,,,,,,141,,,,,,,,142,,,,,,,,141],f:[]},{n:[135,,,,,,,,,,,,135,,,,,,,,,,,,135,,,,,,,,,,,,137,,,,,,,,,,,,139,,,,,,,,,,,,147],f:[]}]},{ct:[2,60,127,28,2,83,138,0,27,0,61,28,65,11,0,0,2,0,0,0,2,118,56,0,91,146,4,0,2],Qt:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,,,,,,,,,135],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,147],f:[]}]},{ct:[3,255,116,79,0,255,116,0,83,123,4,6,69,52,0,0,0,184,11,1,2,14,0,0,32,0,0,0,0],Qt:[,,,,2,2,2,1,2,2,1,1,,,2,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135,,,,,,135,,,135,,,135,,,,,,135,,,135,,,135],f:[]},{n:[,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141],f:[]}]},{ct:[0,39,117,24,0,51,110,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,1,39,76,5,0,0],Qt:[,,,,,,,,,,,,,,,2,2],c:[{n:[],f:[]},{n:[,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151],f:[]}]},{ct:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],Qt:[,,,,2,,2,2,2,2,2,2,2,,2],c:[{n:[],f:[]},{n:[135,,,,,,147,,,,,,135,,,,,,147,,,,,,135,,,,,,147],f:[]}]},{ct:[0,51,128,64,0,59,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,2],Qt:[,,,,,2,2,2,2,2,,,2,2],c:[{n:[],f:[]},{n:[,147,,,135,,,135,,,135,,,147,,,135,,,135,,,147,,,135,,,135,,,147],f:[]}]},{ct:[1,127,118,0,1,128,128,10,0,0,21,0,59,12,0,0,0,69,3,1,1,23,167,0,32,77,6,25,6],Qt:[,,,,2,2,,,2,2,2,2,2],c:[{n:[],f:[]},{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]}]}],ut:6615,Bt:32,gt:16,Mt:8},d=t=>({ft:[{ct:[1,109,120,0,0,53,120,4,0,0,15,0,48,15,50,2,1,0,0,0,2,255,96,0,37,24,1,67,1],Qt:[1],c:[{n:[t],f:[]}]}],ut:5513,Bt:32,gt:0,Mt:1}),c=[d(151),d(161),d(171)],g={ft:[{ct:[3,182,119,63,1,67,129,10,4,0,11,2,138,215,0,0,1,164,12,0,2,94,148,57,32,0,9,0,0],Qt:[1],c:[{n:[137],f:[]}]}],ut:5513,Bt:32,gt:0,Mt:1},u=t=>({ft:[{ct:[0,100,125,0,0,201,131,2,0,0,5,0,39,0,134,3,0,195,6,0,2,44,60,1,39,0,10,0,0],Qt:[1],c:[{n:[t],f:[]}]}],ut:5513,Bt:32,gt:0,Mt:1}),B=[u(135),u(147)],w=function(){let t=new AudioContext,i=t.createGain();i.connect(t.destination);const s={},n=[{name:"song",data:o},{name:"pickup0",data:c[0]},{name:"pickup1",data:c[1]},{name:"pickup2",data:c[2]},{name:"damage",data:g},{name:"jump",data:B[0]},{name:"djump",data:B[1]}];return{wt:()=>(n.forEach((i=>{let n=new l;n.init(i.data),function h(){if(1===n.wt()){let h=n._t(t);((t,i)=>{s[t]=i})(i.name,h)}else setTimeout(h,0)}()})),new Promise((t=>{!function i(){Object.keys(s).length!==n.length?setTimeout(i,100):t()}()}))),play:(n,h=!1,e=.8)=>{const a=s[n];if(!a)return;let A=t.createBufferSource(),r=t.createGain();return A.buffer=a,A.connect(r),r.connect(i),A.loop=h,r.gain.value=e,A.start(),()=>{A.stop()}}}}();function f(t,i,s){return t<i?Math.min(t+s,i):t>i?Math.max(t-s,i):t}function Q(t,i){return t.x<i.x+i.w&&t.x+t.w>i.x&&t.y<i.y+i.t&&t.y+t.t>i.y}function M(t){let i;const s=(n,h)=>{i&&i.remove(),i=(new n).v(h),i.g=t,i.go=s,i.init()};s(p),function(t){let i;const s=n=>{e.R=Math.min(20,Math.max(16,i?n-i:16))/1e3,i=n,e.time+=e.R,t(),requestAnimationFrame(s)};requestAnimationFrame(s)}((()=>{i.update(),t.clear(),t.fr(0,0,64,64,"hsl(20, 5%, 50%)"),t.fr(1,1,62,62,"hsl(70, 15%, 30%)"),i.draw(t)}))}class _ extends a{Et=!1;xt;g;go;update(){r("m")?this.Et||(this.Et=!0,this.xt?(this.xt(),this.xt=void 0):this.xt=w.play("song",!0)):this.Et=!1,super.update()}K(){super.K(),this.xt?.()}}class p extends _{O(){n.load().then((()=>{let t=this.P(A,{name:"loading",tag:"audio",duration:1});t.x=32,t.y=32,w.wt().then((()=>{this.go(m,{level:2})}))}))}}class E extends _{O(){let t=this.P(A,{name:"end"});t.x=32,t.y=32}q(){this.W>4&&r("x")&&this.go(m,{level:1})}}class m extends _{get data(){return this.k}Ct;Ft;O(){this.xt=w.play("song",!0,.1),this.Ct=this.P(X,{level:this.data.level}),this.Ft=this.P(x)}q(){this.Ct.j(v)&&r("x")&&this.go(m,{level:this.data.level}),(this.Ft.j(C)?.W??0)>4&&(3===this.data.level?this.go(E):this.go(m,{level:this.data.level+1}))}}class x extends a{width=0;Gt=0;Dt;Yt;Ut(){this.Gt>0&&this.width++,this.Gt=.9,w.play("pickup"+Math.floor(3*Math.random()))}get done(){return this.width===this.Vt}O(){let t=this.P(A,{name:"collect",tag:"coin"});t.x=3,t.y=3}q(){if(this.Gt>0&&(this.Gt=f(this.Gt,0,3*e.R),this.Gt<.5&&(this.width++,this.Gt=0)),this.Dt&&this.Dt>0&&(this.Dt=f(this.Dt,0,3*e.R),0===this.Dt)){this.Dt=void 0;let t=this.P(A,{name:"restart",tag:"bg",duration:.8});t.x=32,t.y=32,this.Yt=this.P(A,{name:"restart",duration:5}),this.Yt.x=32,this.Yt.y=32}this.Yt&&(this.Yt.y=32+4*Math.sin(8*this.W))}Vt=0;it(t){t.fr(6,1,this.Vt,1,"#f7ffff"),t.fr(6,2,this.width,2,"#b4d800");let i=this.Gt/.9*1;t.fr(6+this.width,2,i,2,"#f59562")}}class C extends a{O(){let t=this.P(A,{name:"victory",duration:1});t.x=32,t.y=20}}class F extends a{get Rt(){return{x:this.x,y:this.y,w:this.w/2,t:this.t/2}}F;It=!0;kt=1;vt=.8;w=4;t=4;grid;dx=0;dy=0;x=0;y=0;Wt=0;yt=0;Jt=this.bt;Xt;Lt;get Zt(){return Math.sign(this.dx)}get Tt(){return this.Wt<0}get bt(){return this.Wt>0}get jt(){return this.yt<0}get Nt(){return this.yt>0}draw(t){t.C(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}update(){super.update(),this.Jt=this.bt}}class G extends F{kt=0;get data(){return this.k}get duration(){return this.data.duration??1}O(){this.F=this.P(A,{name:this.data.name,tag:this.data.tag})}q(){this.W>this.duration&&this.remove()}}class D extends G{O(){this.F=this.P(A,{name:"confetti"})}q(){this.y-=(1*Math.sin(3*this.W)+12)*e.R}it(t){t.C(this.x+3*Math.sin(4*this.W),this.y),this.F.it(t),t.pop()}}class Y extends G{kt=.3;O(){this.F=this.P(A,{name:"crash"})}}class U extends F{Pt}class V extends U{kt=0;vt=64;Ht;O(){this.F=this.P(A,{name:"collect",tag:"coin",duration:.8})}q(){if(void 0!==this.Ht&&(this.Ht=f(this.Ht,0,e.R),this.Ht<2&&(e.I(.3)?this.visible&&(this.visible=!1):e.I(.1)&&(this.visible||(this.visible=!0))),0===this.Ht&&this.remove()),void 0!==this.Pt){if(this.Pt=f(this.Pt,0,e.R),this.F.duration=.16,0===this.Pt){let t=this.parent.P(G,{name:"fx_collect",duration:.3});t.x=this.x,t.y=this.y,this.remove()}}else this.dy=Math.sin(3*this.W)}}class R extends F{}class I extends R{w=8;t=8;O(){this.F=this.P(A,{name:"crawler"}),this.dx=1.2}q(){this.F.et=this.Zt}}class k extends F{kt=0;O(){this.F=this.P(A,{name:"flies",duration:1})}}class v extends F{kt=0;It=!1;O(){this.P(A,{name:"main_char",tag:"die",loop:!1})}}class W extends F{O(){this.P(A,{name:"main_char",tag:"victory"})}}class y extends F{w=8;t=8;Kt=0;Ot=0;St=2;qt=0;zt;$t=!1;ti=!1;O(){this.F=this.P(A,{name:"main_char"})}q(){if(this.Kt>0)return void(this.Kt=f(this.Kt,0,e.R));let t=r("x"),i=r("ArrowLeft")||r("a"),s=r("ArrowRight")||r("d"),n=r("ArrowUp")||r("w");if(this.$t=i,this.ti=s,this.dx=i?-8:s?8:0,n?void 0!==this.qt&&(this.qt+=e.R):void 0===this.qt?this.qt=0:this.qt>0&&(this.qt=-.3),void 0!==this.qt&&this.qt<0&&(this.qt+=e.R,this.qt>=0&&(this.qt=void 0)),void 0!==this.qt&&this.qt>0)if(void 0!==this.zt)this.dy=-40,this.qt=void 0,this.St=1,w.play("jump");else if(this.St>0){this.dy=-40,this.qt=void 0,this.St=0,w.play("djump");let t=this.parent.P(G,{name:"fx_djump",duration:.4});t.x=this.x,t.y=this.y+5}if(this.bt?this.zt=0:this.Jt&&(this.zt=.16),void 0!==this.zt&&this.zt>0&&(this.zt=f(this.zt,0,e.R),0===this.zt&&(this.zt=void 0)),this.bt?0!==this.dx?(this.F.ot("run"),this.F.et=this.Zt):this.F.ot("idle"):(this.F.ot("jump"),0!==this.Zt&&(this.F.et=this.Zt)),t&&0===this.Ot){let t=this.parent.H(b,{dx:this.dx,dy:10});t.x=this.x,t.y=this.y,this.dx*=-6,this.Ot=.2}this.Ot=f(this.Ot,0,e.R)}$(){}}class J extends a{w=4;t=4;x;y;dx;dy;q(){this.dy=Math.sin(8*this.W)*Math.sin(16*this.W)*20,this.W>1.5&&this.remove()}draw(t){t.C(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}}class b extends J{get data(){return this.k}O(){this.dx=2*this.data.dx,this.dy=this.data.dy,this.P(A,{name:"bullet"})}}class X extends a{get data(){return this.k}get Ft(){return this.parent.j(x)}A;ii=0;si=0;ni=this.ii;hi=this.si;get ei(){return 4*this.A[0].length}ai(t,i,s){return!!this.Ai(t,i,s)}Ai(t,i,s){let{x:n,y:h,w:e,t:a}=t;return this.ri(n-e/2+i,h-a/2+s,e,a)}ri(t,i,s=1,n=1){let h=this.A[0].length,e=this.A.length,a=t/4,A=i/4,r=(t+s-1)/4,l=(i+n-1)/4;if(a<0||r>=h||A<0||l>=e)return!0;for(t=a;t<=r;t++)for(i=A;i<=l;i++)if(t=Math.floor(t),i=Math.floor(i),Z(this.A[i][t]))return[4*t,4*i]}O(){let t=n.h[this.data.level-1];this.A=[];for(let s=0;s<t.t;s++)this.A[s]=Array(t.w);let i=0;for(let s=0;s<t.i.length;s++){let{px:n,src:h}=t.i[s],e=n[0]/4,a=n[1]/4,A=h[1]/4*20+h[0]/4;if(399===A){let t=this.P(y);t.x=n[0],t.y=n[1];let i=this.P(k);i.x=n[0],i.y=n[1]-8}else if(398===A){let t=this.P(I);t.x=n[0],t.y=n[1]}else if(397===A){let t=this.P(V);t.x=n[0],t.y=n[1],i++}else this.A[a][e]=A}this.li=i}li=0;S(){this.Ft.Vt=this.li}q(){let t=this.j(y);if(t&&this.Ft.done){let i=this.P(W);i.x=t.x,i.y=t.y,t.remove(),this.j(k)?.remove(),this.Ft.P(C)}if(this.T(I).forEach((t=>{!this.ai(t,Math.sign(t.dx),0)&&this.ai(t,4*Math.sign(t.dx),1)||(t.dx*=-1)})),t&&0===t.Kt){this.J.filter((t=>t instanceof U)).forEach((i=>{void 0===i.Pt&&Q(i,t)&&(i.Pt=.3,i.dy=-8,this.Ft?.Ut())})),this.J.filter((t=>t instanceof R)).forEach((i=>{if(Q(i.Rt,t.Rt)){if(0===this.Ft.width){t.remove();let i=this.P(v);i.x=t.x,i.y=t.y,this.Ft.Dt=2}t.P(G,{name:"fx_flash"}),w.play("damage"),t.Kt=.6,t.dy=-32,0===t.dx?t.dx=6.4:t.dx=8*-Math.sign(t.dx)*.8;for(let i=0;i<this.Ft.width;i++){let s=this.P(V);s.x=t.x,s.y=t.y,s.dx=8*Math.sin(i/this.Ft.width*Math.PI*2),s.dy=80*Math.cos(i/this.Ft.width*Math.PI*2),s.Ht=5}this.Ft.width=0}}))}if(t&&void 0===t.Xt){let i=this.ai(t,0,2),s=this.Ai(t,1,-1)?void 0:this.Ai(t,1,0),n=this.Ai(t,-1,-1)?void 0:this.Ai(t,-1,0);i||(t.ti&&Array.isArray(s)?(t.Xt=.2,t.x=s[0],t.y=s[1]):t.$t&&Array.isArray(n)&&(t.Xt=-.2,t.x=n[0]+4,t.y=n[1]))}if(t&&!t.Xt&&void 0===t.Lt){let i=this.Ai(t,1,-4)?void 0:this.Ai(t,1,0),s=this.Ai(t,-1,-4)?void 0:this.Ai(t,-1,0);t.ti&&Array.isArray(i)?(t.Lt=.16,t.x=i[0],t.y=i[1]-1):t.$t&&Array.isArray(s)&&(t.Lt=-.16,t.x=s[0]+4,t.y=s[1]-1)}this.J.filter((t=>t instanceof F)).forEach((t=>{let i=this.Ai(t,0,0);if(void 0!==t.Xt)return t.Xt=f(t.Xt,0,e.R),void(0===t.Xt&&(t.Xt=void 0,t.y=i[1]-4,t.dy=0));if(void 0!==t.Lt)return t.Lt=f(t.Lt,0,e.R),void(0===t.Lt&&(t.Lt=void 0,t.y=i[1]-4,t.dy=0));let s=4*t.kt,n=0;{let i=Math.abs(t.dy),h=Math.sign(t.dy);for(let a=0;a<i;a+=1){let A=.5*h*Math.sqrt(e.R);if(this.ai(t,0,A)){t.Wt=h,t.dy/=2,n=0;break}t.Wt=0,t.y+=A,n=1-h*(a/i);{let i=t.vt*s*Math.sqrt(n),h=1;t.dy+=h*i*e.R}}}{let i=3*s,n=1;for(let s=0;s<i;s+=1){let i=.5*n*Math.sqrt(e.R);if(this.ai(t,0,i)){t.Wt=n,t.dy=0;break}t.Wt=0,t.y+=i}}{let i=Math.abs(t.dx),s=Math.sign(t.dx),n=1;for(let h=0;h<i;h+=1){let i=.5*s*Math.sqrt(e.R)*n;if(this.ai(t,i,0)){t.yt=s,t.dx=0;break}t.yt=0,t.x+=i}}}));let i=this.j(W);if(i&&e.I(.6))for(let e=0;e<4;e++){let t=this.P(D);t.x=e/3*64+3*Math.sin(6*this.W),t.y=64}let s=t||i;if(s&&(this.ni<s.x-4-1&&(this.ni=s.x-4-1),this.ni>s.x+4+1&&(this.ni=s.x+4+1),this.hi<s.y-8&&(this.hi=s.y-8),this.hi>s.y+8&&(this.hi=s.y+8)),s){let t=s.dx<0?-50:s.dx>0?-10:-32;this.ii=f(this.ii,this.ni+t,50*e.R),this.si=this.hi-32,this.ii=Math.min(Math.max(0,this.ii),this.ei)}this.j(v)&&(this.ii=f(this.ii,this.ii+8*Math.sin(9*this.W),8*e.R),this.si=f(this.si,this.si+8*Math.cos(9*this.W),8*e.R)),this.J.filter((t=>t instanceof J)).forEach((t=>{{let i=Math.abs(t.dy),s=Math.sign(t.dy);for(let n=0;n<i;n+=1){let i=.5*s*Math.sqrt(e.R);if(this.ai(t,0,i)){t.dy/=2;break}t.y+=i;{let i=1,s=1;t.dy+=s*i*e.R}}}{let i=Math.abs(t.dx),s=Math.sign(t.dx),n=1;for(let h=0;h<i;h+=1){let i=.5*s*Math.sqrt(e.R)*n;if(this.ai(t,i,0)){t.dx=0;let i=this.H(Y);i.x=t.x-2*s,i.y=t.y,i.F.et=s,this.remove(t);break}t.x+=i}}}));let n=this.j(k);n&&t&&(n.x=f(n.x,t.x+4*Math.cos(8*t.W),30*e.R),n.y=f(n.y,t.y-8+8*Math.sin(8*t.W),26*e.R),Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<=16?n.F.ot("idle"):n.F.ot("run"),n.F.et=t.F.et);let h="none";if(t&&t.bt&&0!==t.dx&&e.I(.3+.5*Math.random())&&(h="idle"),t&&!t?.Jt&&t.bt&&(h="jump"),t&&"none"!==h){let i=this.P(G,{name:"fx_dust",tag:h,duration:.4});i.x=t.x,"idle"===h&&(i.x+=4*-Math.sign(t.dx)),i.y=t.y,i.F.et=Math.max(1,Math.sign(t.dx))}}tt(t){t.C(-this.ii,-this.si);for(let i=0;i<this.A.length;i++){let s=this.A[i];for(let n=0;n<s.length;n++){let h=s[n];t.V(h,4*n,4*i)}}}it(t){t.pop()}}const L=[0,1,2,3,4,5,20,21,22,23,24,40,41,42,44,60,61,62,63,64,80,81,82,83],Z=t=>L.includes(t);!function(t){let i=function(t,i,s=!0){let n=document.createElement("canvas");s&&n.classList.add("pixelated");let e=n.getContext("2d");const a=()=>{n.width=t,n.height=i,e.imageSmoothingEnabled=s};return document.addEventListener("scroll",a,{capture:!0,passive:!0}),window.addEventListener("resize",a,{passive:!0}),a(),new h(n,e)}(64,64,!0);t.appendChild(i.canvas),M(i)}(document.getElementById("app"));
