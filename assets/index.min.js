const t=""+new URL("out_0-Cp6vHWiI.png",import.meta.url).href,A=[{n:"Level_0",w:112,t:27,A:"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"},{n:"Level_1",w:73,t:37,A:"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"},{n:"Level_2",w:36,t:40,A:"AQQOACBAGGQZZBpkG2QAfACAAIQAiACMAJAAlACYAJwAEAMAHyAbOBtoARADAAAgICggRAEMBQAAHCAkIDwgVAGcAAwBABtgAAQTAB8kHygfLB8wHzQfOBs8HzwbQB9AG0QfRBtIH0gfTB9QH1QXYBdkAQgkAAEgAiADIAQgBSAGIAcgCCAJIAogCyAMIA0gDiAaIBsgHCAdIB4gADQUOCBYIVgiWCNYF2gYaBloGmgcbCJsI2whgCKAI4AciAIEIgAADAAQABQAGCAgACQAKAAsICwAMCAwIDQcOCA4HDwcQCFAHEQcSCBIIEwgUBxcHGAcZBxoAXwBgAGEAYgBjAGQAZQBmAEAMQABHAIcAxwEHAUcBhwHHAgcCRwKHAscDBwNHA4cGhwbHBwcHRweHB8cFDQbNCFUIlQjVBhgGWAaYCJoI2gAeAF4IXwifCN8HIQCnAOcCJwJnAqcEJwRnBKcGJwZnBqcG5wcnAAICQAZIBM4GjgbTB9YG2whbCCAG4gCCAYADyAhKBU4IUQcTB2IAgAMAAAIDxwgHCEkFTQcNCE8HYQEnAucE5wdnAAACgAZHBM0GjQbXCFoIHwbhAecD5wXnAQIDAAPOA1AC0gJUAdYB1wQXBdcBWQUbBRwFHQEDAEAFCgEBAMAFCAXWBxYBAAvAAE0AjQDNAQ0BTQGNAc0CDQJNAo0CzQMNA00DjQOPAxEFkQXRApMCFQGYA5kBGgMaBVoFmgCeAN4BHgFeAZ4B3gIeAl4CngLeAx4DXgOeA94EHgReBJ4E3ghlCKUI5QFAAMAFSQYRB1sAwAEABMkA2gLaCCUAxAPAA88DUQVSAtMFEwTUAlUElQRWAdgEGAPZAVoDWgUeAMMAQAPNAIMDgANPAtEFUQUSAlME0wSUAdUEVQQWAVgD2ANZBRoAwgBABQkE0wBAAUYEkwDAB0YDnQikBFMIgANECIQFSADKAYoCigDLAYsCiwiNAs8HjwPRA1MHkwiTAtUGVgJXCFkB2gedB58B5ALkA+QE5AYkAWUCZQNlBGUFZQalAgEBwASDBMMFAwVDBYMFBAWcAcQAQATEAgQBAAXDBUQF3AWdAgMAQAacAcMAQAVfAcEBQARDBVwFXQVeAKACAgYAAYMBwwIDBgMGQwaDBsMHAwdDB4MEhAWEBQUGHAZcAiACYAPgBCAEYASgBOAFIAVgAkEAgAWeBZ8CAAlAAUIBggHCAgICQgRCBIIEwgUCBUIFggXCBgIGQgaCBsIHAgdCB4IHwgWbBdsGGwZbBtwA3wHfAh8CXwKfA58D3wQfBF8EnwTfBR8BwgGAAUMERATFBp0B4AOgAkICQAJDB8MFxAVFBd0G3QDgAqAFoAJAAEAGmwHAAIAFWwCfAsMAQAChAsAEwADCAQICggLCAwIDQgOCA8IEAggCCEIIggjCAR8BXwGfAt8DHwNfAwAAQAccAoAAQACCAYMEwAIGA0YGxgfGCAYBTAVQApIEVAiUCNQGlwNYAN0BnQcgBKYG5gdmAYAGAAJGAoYISADMAQwBjAHMA0wEzAUMBswGEAURAdQCFAQVAV0CXQKdAx0G4ADmAiYGZgGCBUACxgIMAkwCzAMMAtACUgSTAVcGFwEZCJkAXQCdAh0HYACmAeYCZgKmByYBhAOAAwYGhgcGBZABlwDZCNkBHQLdCB4IXgieBCYGpgGBBIADhgKMBowHDAhOAxAF0ATSCFQGVwOYAd0C5gPmBGYE5gXmBiY"}];function i(t){function A(t){function A(t){return[4*(t%1024),4*Math.floor(t/1024)]}let i=[],s=function(t){const A=atob(t),i=A.length,s=new Uint8Array(i);for(let n=0;n<i;n++)s[n]=A.charCodeAt(n);return new Uint16Array(s.buffer)}(t);for(let n=0;n<s.length;){let t=s[n];n++;let h=s[n];n++;let e=[...s.slice(n,n+h)];n+=h,i.push(...e.map((i=>({src:A(t),px:A(i)}))))}return i}return t.map((t=>{let{n:i,w:s,t:n,A:h}=t;return{name:i,w:s,t:n,A:A(h)}}))}const s=new class{image;info;i;h;async load(){var s;this.image=await(s=t,new Promise((t=>{let A=new Image;A.onload=()=>t(A),A.src=s}))),this.info="bullet\n\n0*0*idle\n\n0*144*236\n\n\ncollect\n\n0*2*coin\n\n0*152*236\n0*160*236\n0*168*236\n\n\nconfetti\n\n0*3*idle\n\n0*176*236\n0*184*236\n0*192*236\n0*200*236\n\n\ncrash\n\n0*2*idle\n\n0*208*236\n0*216*236\n0*224*236\n\n\ncrawler\n\n0*1*idle\n\n0*232*236\n0*240*236\n\n\nend\n\n0*4*idle\n\n2*0*0\n2*80*0\n2*160*0\n2*0*80\n2*80*80\n\n\nflies\n\n0*7*idle\n8*13*run\n\n1*160*190\n1*176*190\n1*192*190\n1*208*190\n1*224*190\n1*240*190\n1*240*160\n1*240*80\n1*240*96\n1*240*112\n1*240*128\n1*240*144\n1*240*0\n1*240*16\n\n\nfx_collect\n\n0*2*idle\n\n0*248*236\n0*144*244\n0*152*244\n\n\nfx_djump\n\n0*1*idle\n\n0*160*244\n0*168*244\n\n\nfx_dust\n\n0*4*idle\n5*7*jump\n\n0*176*244\n0*184*244\n0*192*244\n0*200*244\n0*208*244\n0*216*244\n0*224*244\n0*232*244\n\n\nfx_flash\n\n0*1*idle\n\n0*240*244\n0*248*244\n\n\ninfo\n\n0*0*run\n1*1*jump\n2*2*djump\n3*3*shoot\n\n1*240*32\n1*240*48\n1*240*64\n1*0*220\n\n\nloading\n\n0*1*audio\n2*4*input\n\n4*0*160\n4*80*160\n4*160*160\n4*0*190\n4*80*190\n\n\nmain_char\n\n0*2*idle\n3*6*victory\n7*12*run\n13*17*jump\n18*20*die\n\n0*160*206\n0*168*206\n0*176*206\n0*184*206\n0*192*206\n0*200*206\n0*208*206\n0*216*206\n0*224*206\n0*232*206\n0*240*206\n0*248*206\n0*240*176\n0*248*176\n0*0*252\n0*8*252\n0*16*252\n0*24*252\n0*32*252\n0*40*252\n0*48*252\n\n\nnpc\n\n0*0*idle\n\n3*16*220\n\n\nrestart\n\n0*2*idle\n3*6*bg\n\n1*64*220\n1*80*220\n1*96*220\n1*112*220\n1*128*220\n1*144*220\n1*160*220\n\n\ntest\n\n0*2*idle\n3*4*attack\n\n1*176*220\n1*192*220\n1*208*220\n1*224*220\n1*240*220\n\n\ntiles\n\n0*0*idle\n\n2*160*80\n\n\nvictory\n\n0*8*idle\n\n1*0*236\n1*16*236\n1*32*236\n1*48*236\n1*64*236\n1*80*236\n1*96*236\n1*112*236\n1*128*236".split(/\r?\n\r?\n\r?\n/).map((t=>{let[A,i,s]=t.split(/\r?\n\r?\n/);return{name:A,tags:i.split(/\r?\n/).map((t=>{let[A,i,s]=t.split("*");return{from:parseInt(A),to:parseInt(i),name:s}})),B:s.split(/\r?\n/).map((t=>{let[A,i,s,n,h,e,a,g]=function(t){let[A,i,s]=t,n=0,h=0,[e,a]=0===A?[8,8]:1===A?[16,16]:2===A?[80,80]:4===A?[80,30]:[0,0],[g,B]=[e,a];return[n,h,e,a,i,s,g,B]}(t.split("*").map((t=>parseInt(t))));return{fx:A,fy:i,l:s,o:n,C:h,M:e,u:a,F:g}}))}})),this.h=this.info.find((t=>"tiles"===t.name)).B[0],this.i=i(A)}};class n{constructor(t,A){this.canvas=t,this.D=A}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){let{D:t}=this;t.clearRect(0,0,this.width,this.height)}fr(t,A,i,s,n){let{D:h}=this;h.fillStyle=n,h.fillRect(t,A,i,s)}G(t,A){let{D:i}=this;i.save(),i.translate(Math.floor(t),Math.floor(A))}pop(){let{D:t}=this;t.restore()}U(t,A,i,s=1,n=1){let{fx:h,fy:e,C:a,M:g,u:B,F:r}=t.I,{_:Q,Y:l}=t,o=A-h-Q,w=i-e-l;this.V(o,w,a,g,B,r,s,n)}p(t,A,i){let{fx:n,fy:h,C:e,M:a}=s.h,g=A-n,B=i-h,r=t%20*4,Q=4*Math.floor(t/20);this.V(g,B,e+r,a+Q,4,4)}V(t,A,i,n,h,e,a=1,g=1){let{D:B}=this,{image:r}=s;B.save();let Q=h,l=e,o=Q*Math.abs(a),w=l*Math.abs(g);B.scale(Number(a.toFixed(2)),Number(g.toFixed(2))),a<0&&(t*=-1,t-=o),g<0&&(A*=-1,A-=w),B.drawImage(r,i,n,Q,l,Math.round(t),Math.round(A),Math.round(o),Math.round(w)),B.restore()}}const h={R:16,time:0,m(t,A=0){let{R:i,time:s}=this;return Math.floor((s-A-i)/t)<Math.floor((s-A)/t)}};class e{k;W(t){return this.k=t,this}visible=!0;parent;H;N;Z;X;J(t,A){this.X.push([t,A])}constructor(){this.Z=[],this.N=[],this.X=[]}T(t){return this.N.filter((A=>A instanceof t))}v(t){return this.N.find((A=>A instanceof t))}O(t,A){let i=(new t).W(A).init();return i.parent=this,i}j(t,A={}){let i=this.O(t,A);return this.N.push(i),i}P(t,A={},i=7){let s=this.O(t,A);return this.N.push(s),this.Z.push([s,i]),s}remove(t){if(!t)return void(this.parent?this.parent.remove(this):this.L());let A=this.N.indexOf(t);if(-1===A)throw"noscene rm";this.N.splice(A,1),A=this.Z.findIndex((([A])=>A===t)),-1!==A&&this.Z.splice(A,1),t.L()}init(){return this.H=0,this.S(),this}update(){0===this.H&&this.K(),this.N.forEach((t=>t.update())),this.H+=h.R,this.X=this.X.map((([t,A])=>(t-h.R<0&&A(),[t-h.R,A]))).filter((t=>t[0]>0)),this.Z.slice(0).forEach((([t,A])=>{let i=this.Z.filter((A=>A[0].constructor.name===t.constructor.name));if(i.length>A){let t=i[0][0];this.remove(t)}})),this.q(),this.$()}draw(t){this.visible&&(this.tt(t),this.N.forEach((A=>A.draw(t))),this.At(t))}L(){this.it()}S(){}K(){}q(){}$(){}At(t){}tt(t){}it(){}}class a extends e{get data(){return this.k}get info(){let t=s.info.find((t=>t.name===this.st));if(!t)throw`nosprite ${this.st}`;return t}get duration(){return this.data.duration??.4}set duration(t){this.data.duration=t}get tag(){let t=this.info.tags.find((t=>t.name===this.nt));if(!t)throw`notag ${this.st} ${this.nt}`;return t}get st(){return this.data.name}get nt(){return this.data.tag||"idle"}x=0;y=0;ht=1;et=1;gt(t,A){this.x=t,this.y=A}_current_frame=0;get I(){let{from:t}=this.tag;return this.info.B[this._current_frame+t]}get Bt(){return this.data.Bt??"c"}get _(){if("tl"===this.Bt)return 0;let{l:t}=this.I;return"c"===this.Bt||"bc"===this.Bt?t/2:0}get Y(){if("tl"===this.Bt)return 0;let{o:t}=this.I;return"c"===this.Bt?t/2:"bc"===this.Bt?t:0}rt(t){this.data.tag!==t&&(this.data.tag=t,this._current_frame=0,this.Qt=0)}Qt=0;q(){let{from:t,to:A}=this.tag,{duration:i}=this,s=i/(A-t+1),n=A-t;this.Qt+=h.R,this.Qt>=s&&(this.Qt-=s,this._current_frame===n?!1!==this.data.loop&&(this._current_frame=0):this._current_frame+=1)}At(t){let{x:A,y:i,ht:s,et:n}=this;t.U(this,A,i,s,n)}}const g=function(){let t=new Set;return document.addEventListener("keydown",(A=>{return i=A.key,void t.add(i);var i})),document.addEventListener("keyup",(A=>{return i=A.key,void t.delete(i);var i})),A=>[...t].includes(A)}();var B=function(){var t,A,i,s,n,h=function(t){return Math.sin(6.283184*t)},e=function(t){return.003959503758*2**((t-128)/12)},a=function(t,A,i){var s,n,h,a,B,r,Q=g[t.lt[0]],l=t.lt[1],o=t.lt[3]/32,w=g[t.lt[4]],c=t.lt[5],C=t.lt[8]/32,d=t.lt[9],E=t.lt[10]*t.lt[10]*4,M=t.lt[11]*t.lt[11]*4,u=t.lt[12]*t.lt[12]*4,F=1/u,D=-t.lt[13]/16,G=t.lt[14],f=i*2**(2-t.lt[15]),U=new Int32Array(E+M+u),I=0,x=0;for(s=0,n=0;s<E+M+u;s++,n++)n>=0&&(n-=f,B=e(A+(15&(G=G>>8|(255&G)<<4))+t.lt[2]-128),r=e(A+(15&G)+t.lt[6]-128)*(1+8e-4*t.lt[7])),h=1,s<E?h=s/E:s>=E+M&&(h=(1-(h=(s-E-M)*F))*3**(D*h)),a=Q(I+=B*h**o)*l,a+=w(x+=r*h**C)*c,d&&(a+=(2*Math.random()-1)*d),U[s]=80*a*h|0;return U},g=[h,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var A=t%1*4;return A<2?A-1:3-A}];this.init=function(h){t=h,A=h.ot,i=0,s=h.wt*h.ct*(A+1)*2,n=new Int32Array(s)},this.Ct=function(){var e,B,r,Q,l,o,w,c,C,d,E,M,u,F,D=new Int32Array(s),G=t.dt[i],f=t.wt,U=t.ct,I=0,x=0,_=!1,Y=[];for(r=0;r<=A;++r)for(w=G.Et[r],Q=0;Q<U;++Q){var V=w?G.c[w-1].f[Q]:0;V&&(G.lt[V-1]=G.c[w-1].f[Q+U]||0,V<17&&(Y=[]));var p=g[G.lt[16]],R=G.lt[17]/512,m=2**(G.lt[18]-9)/f,k=G.lt[19],W=G.lt[20],H=43.23529*G.lt[21]*3.141592/44100,N=1-G.lt[22]/255,Z=1e-5*G.lt[23],X=G.lt[24]/32,J=G.lt[25]/512,T=6.283184*2**(G.lt[26]-9)/f,b=G.lt[27]/255,v=G.lt[28]*f&-2;for(E=(r*U+Q)*f,l=0;l<4;++l)if(o=w?G.c[w-1].n[Q+l*U]:0){Y[o]||(Y[o]=a(G,o,f));var O=Y[o];for(B=0,e=2*E;B<O.length;B++,e+=2)D[e]+=O[B]}for(B=0;B<f;B++)(d=D[c=2*(E+B)])||_?(M=H,k&&(M*=p(m*c)*R+.5),x+=(M=1.5*Math.sin(M))*(u=N*(d-x)-(I+=M*x)),d=3==W?x:1==W?u:I,Z&&(d=(d*=Z)<1?d>-1?h(.25*d):-1:1,d/=Z),_=(d*=X)*d>1e-5,F=d*(1-(C=Math.sin(T*c)*J+.5)),d*=C):F=0,c>=v&&(F+=D[c-v+1]*b,d+=D[c-v]*b),D[c]=0|F,D[c+1]=0|d,n[c]+=0|F,n[c+1]+=0|d}return++i/t.Mt},this.ut=function(t){for(var A=t.createBuffer(2,s/2,44100),i=0;i<2;i++)for(var h=A.getChannelData(i),e=i;e<s;e+=2)h[e>>1]=n[e]/65536;return A}};const r={dt:[{lt:[1,130,128,0,1,128,116,9,0,25,6,22,34,0,0,0,0,69,3,0,2,23,167,0,32,77,6,25,6],Et:[1,2,1,2,,,1,2,1,2,1,2,,2,1],c:[{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]},{n:[142,146,137,142,146,137,142,146,137,142,146,137,142,146,137,140,144,135,140,144,135,140,144,135,140,144,135,140,144,135,140,144,154,,,154,,,154,,,154,,,154,,,152,,,152,,,152,,,152,,,152,,,152],f:[]}]},{lt:[0,68,128,0,3,91,128,6,0,0,25,40,101,37,102,0,1,55,8,0,1,53,61,26,27,84,6,144,4],Et:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,139,,,,,,,,135,,,,,,,,139,,,,,,,,151,,,,,,,,144,,,,,,,,139,,,,,,,,144,,,,,,,,142,,,,,,,,141,,,,,,,,142,,,,,,,,141],f:[]},{n:[135,,,,,,,,,,,,135,,,,,,,,,,,,135,,,,,,,,,,,,137,,,,,,,,,,,,139,,,,,,,,,,,,147],f:[]}]},{lt:[2,60,127,28,2,83,138,0,27,0,61,28,65,11,0,0,2,0,0,0,2,118,56,0,91,146,4,0,2],Et:[,,2,2,,,,,,,,,,,,3],c:[{n:[],f:[]},{n:[135,,,,,,,,,,,,,,,,135],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,147],f:[]}]},{lt:[3,255,116,79,0,255,116,0,83,123,4,6,69,52,0,0,0,184,11,1,2,14,0,0,32,0,0,0,0],Et:[,,,,2,2,2,1,2,2,1,1,,,2,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135,,,,,,135,,,135,,,135,,,,,,135,,,135,,,135],f:[]},{n:[,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141,,,141],f:[]}]},{lt:[0,39,117,24,0,51,110,0,64,0,4,6,35,0,0,0,0,0,0,0,2,14,0,1,39,76,5,0,0],Et:[,,,,,,,,,,,,,,,2,2],c:[{n:[],f:[]},{n:[,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151,,151],f:[]}]},{lt:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],Et:[,,,,2,,2,2,2,2,2,2,2,,2],c:[{n:[],f:[]},{n:[135,,,,,,147,,,,,,135,,,,,,147,,,,,,135,,,,,,147],f:[]}]},{lt:[0,51,128,64,0,59,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,2],Et:[,,,,,2,2,2,2,2,,,2,2],c:[{n:[],f:[]},{n:[,147,,,135,,,135,,,135,,,147,,,135,,,135,,,147,,,135,,,135,,,147],f:[]}]},{lt:[1,127,118,0,1,128,128,10,0,0,21,0,59,12,0,0,0,69,3,1,1,23,167,0,32,77,6,25,6],Et:[,,,,2,2,,,2,2,2,2,2],c:[{n:[],f:[]},{n:[135,139,142,135,139,142,135,139,142,135,139,142,135,139,142,135,141,144,139,141,144,139,141,144,139,141,144,139,141,144,139,141,147,,,147,,,147,,,147,,,147,,,147,,156,,,156,,,156,,,156,,,156],f:[]}]}],wt:6615,ct:32,ot:16,Mt:8},Q=t=>({dt:[{lt:[1,109,120,0,0,53,120,4,0,0,15,0,48,15,50,2,1,0,0,0,2,255,96,0,37,24,1,67,1],Et:[1],c:[{n:[t],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1}),l=[Q(151),Q(161),Q(171)],o={dt:[{lt:[3,182,119,63,1,67,129,10,4,0,11,2,138,215,0,0,1,164,12,0,2,94,148,57,32,0,9,0,0],Et:[1],c:[{n:[137],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1},w=t=>({dt:[{lt:[0,100,125,0,0,201,131,2,0,0,5,0,39,0,134,3,0,195,6,0,2,44,60,1,39,0,10,0,0],Et:[1],c:[{n:[t],f:[]}]}],wt:5513,ct:32,ot:0,Mt:1}),c=[w(135),w(147)],C=function(){let t=new AudioContext,A=t.createGain();A.connect(t.destination);const i={},s=[{name:"song",data:r},{name:"pickup0",data:l[0]},{name:"pickup1",data:l[1]},{name:"pickup2",data:l[2]},{name:"damage",data:o},{name:"jump",data:c[0]},{name:"djump",data:c[1]}];return{Ct:()=>(s.forEach((A=>{let s=new B;s.init(A.data),function n(){if(1===s.Ct()){let n=s.ut(t);((t,A)=>{i[t]=A})(A.name,n)}else setTimeout(n,0)}()})),new Promise((t=>{!function A(){Object.keys(i).length!==s.length?setTimeout(A,100):t()}()}))),play:(s,n=!1,h=.8)=>{const e=i[s];if(!e)return;let a=t.createBufferSource(),g=t.createGain();return a.buffer=e,a.connect(g),g.connect(A),a.loop=n,g.gain.value=h,a.start(),()=>{a.stop()}}}}();function d(t,A,i){return t<A?Math.min(t+i,A):t>A?Math.max(t-i,A):t}function E(t,A){return t.x<A.x+A.w&&t.x+t.w>A.x&&t.y<A.y+A.t&&t.y+t.t>A.y}function M(t){let A;const i=(s,n)=>{A&&A.remove(),A=(new s).W(n),A.g=t,A.go=i,A.init()};i(F),function(t){let A;const i=s=>{h.R=Math.min(20,Math.max(16,A?s-A:16))/1e3,A=s,h.time+=h.R,t(),requestAnimationFrame(i)};requestAnimationFrame(i)}((()=>{A.update(),t.clear(),t.fr(0,0,64,64,"hsl(20, 5%, 50%)"),t.fr(1,1,62,62,"hsl(70, 15%, 30%)"),A.draw(t)}))}class u extends e{Ft=!1;Dt;g;go;update(){g("m")?this.Ft||(this.Ft=!0,this.Dt?(this.Dt(),this.Dt=void 0):this.Dt=C.play("song",!0)):this.Ft=!1,super.update()}L(){super.L(),this.Dt?.()}}class F extends u{S(){s.load().then((()=>{let t=this.j(a,{name:"loading",tag:"audio",duration:1});t.x=32,t.y=32,C.Ct().then((()=>{this.go(G,{level:1})}))}))}}class D extends u{S(){let t=this.j(a,{name:"end"});t.x=32,t.y=32}q(){this.H>4&&g("x")&&this.go(G,{level:1})}}class G extends u{get data(){return this.k}Gt;ft;S(){this.Dt=C.play("song",!0,.1),this.Gt=this.j(T,{level:this.data.level}),this.ft=this.j(f)}q(){this.Gt.v(W)&&g("x")&&this.go(G,{level:this.data.level}),(this.ft.v(U)?.H??0)>4&&(3===this.data.level?this.go(D):this.go(G,{level:this.data.level+1}))}}class f extends e{width=0;Ut=0;It;xt;_t(){this.Ut>0&&this.width++,this.Ut=.9,C.play("pickup"+Math.floor(3*Math.random()))}get done(){return this.width===this.Yt}S(){let t=this.j(a,{name:"collect",tag:"coin"});t.x=3,t.y=3}q(){if(this.Ut>0&&(this.Ut=d(this.Ut,0,3*h.R),this.Ut<.5&&(this.width++,this.Ut=0)),this.It&&this.It>0&&(this.It=d(this.It,0,3*h.R),0===this.It)){this.It=void 0;let t=this.j(a,{name:"restart",tag:"bg",duration:.8});t.x=32,t.y=32,this.xt=this.j(a,{name:"restart",duration:5}),this.xt.x=32,this.xt.y=32}this.xt&&(this.xt.y=32+4*Math.sin(8*this.H))}Yt=0;At(t){t.fr(6,1,this.Yt,1,"#f7ffff"),t.fr(6,2,this.width,2,"#b4d800");let A=this.Ut/.9*1;t.fr(6+this.width,2,A,2,"#f59562")}}class U extends e{S(){let t=this.j(a,{name:"victory",duration:1});t.x=32,t.y=20}}class I extends e{get Vt(){return{x:this.x,y:this.y,w:this.w/2,t:this.t/2}}U;Rt=!0;kt=1;Wt=3.3;w=4;t=4;grid;dx=0;dy=0;x=0;y=0;Ht=0;Nt=0;Zt=this.Xt;Jt;Tt;bt=0;get vt(){return this.bt>this.y}get Ot(){return this.bt<this.y}get jt(){return Math.sign(this.dx)}get yt(){return this.Ht<0}get Xt(){return this.Ht>0}get Pt(){return this.Nt<0}get Lt(){return this.Nt>0}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}update(){super.update(),this.Zt=this.Xt,this.bt=this.y}}class x extends I{kt=0;get data(){return this.k}get duration(){return this.data.duration??1}S(){this.U=this.j(a,{name:this.data.name,tag:this.data.tag})}q(){this.H>this.duration&&this.remove()}}class _ extends x{S(){this.U=this.j(a,{name:"confetti"})}q(){this.y-=(1*Math.sin(3*this.H)+12)*h.R}At(t){t.G(this.x+3*Math.sin(4*this.H),this.y),this.U.At(t),t.pop()}}class Y extends x{kt=.3;S(){this.U=this.j(a,{name:"crash"})}}class V extends I{St}class p extends V{kt=0;Wt=264;Kt;zt;qt;S(){this.U=this.j(a,{name:"collect",tag:"coin",duration:.8})}q(){if(void 0!==this.Kt&&(this.Kt=d(this.Kt,0,h.R),this.Kt<2&&(h.m(.3)?this.visible&&(this.visible=!1):h.m(.1)&&(this.visible||(this.visible=!0))),0===this.Kt&&(this.parent.$t(),this.remove())),void 0!==this.St){if(this.St=d(this.St,0,h.R),this.U.duration=.16,0===this.St){let t=this.parent.j(x,{name:"fx_collect",duration:.3});t.x=this.x,t.y=this.y,this.parent.tA(this),this.remove()}}else this.dy=Math.sin(3*this.H)}}class R extends I{}class m extends R{w=8;t=8;S(){this.U=this.j(a,{name:"crawler"}),this.dx=1.2}q(){this.U.ht=this.jt}}class k extends I{kt=0;S(){this.U=this.j(a,{name:"flies",duration:1})}}class W extends I{kt=0;Rt=!1;S(){this.j(a,{name:"main_char",tag:"die",loop:!1})}}class H extends I{S(){this.j(a,{name:"main_char",tag:"victory"})}}class N extends I{w=8;t=8;AA=0;iA=0;sA=2;nA=0;hA;eA=!1;aA=!1;S(){this.U=this.j(a,{name:"main_char"})}q(){if(this.AA>0)return void(this.AA=d(this.AA,0,h.R));let t=g("x"),A=g("ArrowLeft")||g("a"),i=g("ArrowRight")||g("d"),s=g("ArrowUp")||g("w");if(this.eA=A,this.aA=i,this.dx=A?-8:i?8:0,s?void 0!==this.nA&&(this.nA+=h.R):void 0===this.nA?this.nA=0:this.nA>0&&(this.nA=-.3),void 0!==this.nA&&this.nA<0&&(this.nA+=h.R,this.nA>=0&&(this.nA=void 0)),void 0!==this.nA&&this.nA>0)if(void 0!==this.hA)this.dy=-30,this.nA=void 0,this.sA=1,C.play("jump");else if(this.sA>0){this.dy=-30,this.nA=void 0,this.sA=0,C.play("djump");let t=this.parent.j(x,{name:"fx_djump",duration:.4});t.x=this.x,t.y=this.y+5}if(this.Xt?this.hA=0:this.Zt&&(this.hA=.16),void 0!==this.hA&&this.hA>0&&(this.hA=d(this.hA,0,h.R),0===this.hA&&(this.hA=void 0)),this.Xt?0!==this.dx?(this.U.rt("run"),this.U.ht=this.jt):this.U.rt("idle"):(this.U.rt("jump"),0!==this.jt&&(this.U.ht=this.jt)),t&&0===this.iA){let t=this.parent.P(X,{dx:this.dx,dy:10});t.x=this.x,t.y=this.y,this.dx*=-6,this.iA=.2}this.iA=d(this.iA,0,h.R)}$(){}}class Z extends e{w=4;t=4;x;y;dx;dy;q(){this.dy=Math.sin(8*this.H)*Math.sin(16*this.H)*20,this.H>1.5&&this.remove()}draw(t){t.G(Math.floor(this.x),Math.floor(this.y)),super.draw(t),t.pop()}}class X extends Z{get data(){return this.k}S(){this.dx=2*this.data.dx,this.dy=this.data.dy,this.j(a,{name:"bullet"})}}class J extends I{static gA=[];kt=0;S(){0===J.gA.length&&(J.gA=["run","jump","djump","shoot"]);let t=J.gA.shift();console.log(t),this.U=this.j(a,{name:"info",tag:t})}}class T extends e{BA=[];tA(t){t.zt&&this.BA.push([t.zt,t.qt])}$t(){let t=this.BA.pop();if(t){let A=this.j(p);A.x=t[0],A.y=t[1],A.zt=t[0],A.qt=t[1]}}get data(){return this.k}get ft(){return this.parent.v(f)}h;rA=0;QA=0;lA=this.rA;oA=this.QA;get wA(){return 4*this.h[0].length}cA(t,A,i){return!!this.CA(t,A,i)}CA(t,A,i){let{x:s,y:n,w:h,t:e}=t;return this.dA(s-h/2+A,n-e/2+i,h,e)}dA(t,A,i=1,s=1){let n=this.h[0].length,h=this.h.length,e=t/4,a=A/4,g=(t+i-1)/4,B=(A+s-1)/4;if(e<0||g>=n||a<0||B>=h)return!0;for(t=e;t<=g;t++)for(A=a;A<=B;A++)if(t=Math.floor(t),A=Math.floor(A),v(this.h[A][t]))return[4*t,4*A]}S(){let t=s.i[this.data.level-1];this.h=[];for(let i=0;i<t.t;i++)this.h[i]=Array(t.w);let A=0;for(let i=0;i<t.A.length;i++){let{px:s,src:n}=t.A[i],h=s[0]/4,e=s[1]/4,a=n[1]/4*20+n[0]/4;if(399===a){let t=this.j(N);t.x=s[0],t.y=s[1];let A=this.j(k);A.x=s[0],A.y=s[1]-8}else if(398===a){let t=this.j(m);t.x=s[0],t.y=s[1]}else if(397===a){let t=this.j(p);t.x=s[0],t.y=s[1],t.zt=s[0],t.qt=s[1],A++}else if(396===a){let t=this.j(J);t.x=s[0],t.y=s[1]}else this.h[e][h]=a}this.EA=A}EA=0;K(){this.ft.Yt=this.EA}q(){let t=this.v(N);if(t&&this.ft.done){let A=this.j(H);A.x=t.x,A.y=t.y,t.remove(),this.v(k)?.remove(),this.ft.j(U)}if(this.T(m).forEach((t=>{!this.cA(t,Math.sign(t.dx),0)&&this.cA(t,4*Math.sign(t.dx),1)||(t.dx*=-1)})),t&&0===t.AA){this.N.filter((t=>t instanceof V)).forEach((A=>{void 0===A.St&&E(A,t)&&(A.St=.3,A.dy=-8,this.ft?._t())})),this.N.filter((t=>t instanceof R)).forEach((A=>{if(E(A.Vt,t.Vt)){if(0===this.ft.width){t.remove();let A=this.j(W);A.x=t.x,A.y=t.y,this.ft.It=2}t.j(x,{name:"fx_flash"}),C.play("damage"),t.AA=.6,t.dy=-24,0===t.dx?t.dx=6.4:t.dx=8*-Math.sign(t.dx)*.8;for(let A=0;A<this.ft.width;A++){let i=this.j(p);i.x=t.x,i.y=t.y,i.dx=8*Math.sin(A/this.ft.width*Math.PI*2),i.dy=80*Math.cos(A/this.ft.width*Math.PI*2),i.Kt=5}this.ft.width=0}}))}if(t&&void 0===t.Jt){let A=this.cA(t,0,2),i=this.CA(t,1,-1)?void 0:this.CA(t,1,0),s=this.CA(t,-1,-1)?void 0:this.CA(t,-1,0);A||(t.aA&&Array.isArray(i)?(t.Jt=.2,t.x=i[0],t.y=i[1]):t.eA&&Array.isArray(s)&&(t.Jt=-.2,t.x=s[0]+4,t.y=s[1]))}if(t&&!t.Jt&&void 0===t.Tt){let A=this.CA(t,1,-4)?void 0:this.CA(t,1,0),i=this.CA(t,-1,-4)?void 0:this.CA(t,-1,0);t.aA&&Array.isArray(A)?(t.Tt=.16,t.x=A[0],t.y=A[1]-1):t.eA&&Array.isArray(i)&&(t.Tt=-.16,t.x=i[0]+4,t.y=i[1]-1)}this.N.filter((t=>t instanceof I)).forEach((t=>{let A=this.CA(t,0,0);if(void 0!==t.Jt)return t.Jt=d(t.Jt,0,h.R),void(0===t.Jt&&(t.Jt=void 0,t.y=A[1]-4,t.dy=0));if(void 0!==t.Tt)return t.Tt=d(t.Tt,0,h.R),void(0===t.Tt&&(t.Tt=void 0,t.y=A[1]-4,t.dy=0));let i=1.6*t.kt,s=0;{let A=Math.abs(t.dy),n=Math.sign(t.dy);for(let e=0;e<A;e+=1){let a=.5*n*Math.sqrt(h.R);if(this.cA(t,0,a)){t.Ht=n,t.dy/=2,s=0;break}t.Ht=0,t.y+=a,s=1-n*(e/A);{let A=t.Wt*i*Math.sqrt(s),n=1;t.dy+=n*A*h.R}}}if(t.dy>-1){let A=12*i,s=1;for(let i=0;i<A;i+=1){let A=.5*s*Math.sqrt(h.R);if(this.cA(t,0,A)){t.Ht=s,t.dy=0;break}t.Ht=0,t.y+=A}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.R)*s;if(this.cA(t,A,0)){t.Nt=i,t.dx=0;break}t.Nt=0,t.x+=A}}}));let A=this.v(H);if(A&&h.m(.6))for(let h=0;h<4;h++){let t=this.j(_);t.x=h/3*64+3*Math.sin(6*this.H),t.y=64}let i=t||A;if(i&&(this.lA<i.x-4-1&&(this.lA=i.x-4-1),this.lA>i.x+4+1&&(this.lA=i.x+4+1),this.oA<i.y-8&&(this.oA=i.y-8),this.oA>i.y+8&&(this.oA=i.y+8)),i){let t=i.dx<0?-50:i.dx>0?-10:-32;this.rA=d(this.rA,this.lA+t,50*h.R),this.QA=this.oA-32,this.rA=Math.min(Math.max(0,this.rA),this.wA)}this.v(W)&&(this.rA=d(this.rA,this.rA+8*Math.sin(9*this.H),8*h.R),this.QA=d(this.QA,this.QA+8*Math.cos(9*this.H),8*h.R)),this.N.filter((t=>t instanceof Z)).forEach((t=>{{let A=Math.abs(t.dy),i=Math.sign(t.dy);for(let s=0;s<A;s+=1){let A=.5*i*Math.sqrt(h.R);if(this.cA(t,0,A)){t.dy/=2;break}t.y+=A;{let A=1,i=1;t.dy+=i*A*h.R}}}{let A=Math.abs(t.dx),i=Math.sign(t.dx),s=1;for(let n=0;n<A;n+=1){let A=.5*i*Math.sqrt(h.R)*s;if(this.cA(t,A,0)){t.dx=0;let A=this.P(Y);A.x=t.x-2*i,A.y=t.y,A.U.ht=i,this.remove(t);break}t.x+=A}}}));let s=this.v(k);s&&t&&(s.x=d(s.x,t.x+4*Math.cos(8*t.H),30*h.R),s.y=d(s.y,t.y-8+8*Math.sin(8*t.H),26*h.R),Math.abs(s.x-t.x)+Math.abs(s.y-t.y)<=16?s.U.rt("idle"):s.U.rt("run"),s.U.ht=t.U.ht);let n="none";if(t&&t.Xt&&0!==t.dx&&h.m(.3+.5*Math.random())&&(n="idle"),t&&!t?.Zt&&t.Xt&&(n="jump"),t&&"none"!==n){let A=this.j(x,{name:"fx_dust",tag:n,duration:.4});A.x=t.x,"idle"===n&&(A.x+=4*-Math.sign(t.dx)),A.y=t.y,A.U.ht=Math.max(1,Math.sign(t.dx))}}tt(t){t.G(-this.rA,-this.QA);for(let A=0;A<this.h.length;A++){let i=this.h[A];for(let s=0;s<i.length;s++){let n=i[s];t.p(n,4*s,4*A)}}}At(t){t.pop()}}const b=[0,1,2,3,4,5,20,21,22,23,24,40,41,42,44,60,61,62,63,64,80,81,82,83],v=t=>b.includes(t);!function(t){let A=function(t,A,i=!0){let s=document.createElement("canvas");i&&s.classList.add("pixelated");let h=s.getContext("2d");const e=()=>{s.width=t,s.height=A,h.imageSmoothingEnabled=i};return document.addEventListener("scroll",e,{capture:!0,passive:!0}),window.addEventListener("resize",e,{passive:!0}),e(),new n(s,h)}(64,64,!0);t.appendChild(A.canvas),M(A)}(document.getElementById("app"));
